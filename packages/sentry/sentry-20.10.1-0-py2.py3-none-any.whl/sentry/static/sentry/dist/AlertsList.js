(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[63],{1725:function(t,e,n){"use strict";n(1);var r=n(278),a=n.n(r),i=n(0),o=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(i.f)(a.a,{title:e},t.children)};o.displayName="SentryDocumentTitle",e.a=o},1736:function(t,e,n){"use strict";var r=n(4),a=(n(1),n(9)),i=n(0),o=Object(r.a)((function(t){var e=t.className,n=t.children,r=t.error;return Object(i.f)("div",{"data-test-id":"loading-placeholder",className:e},r||n)}),{target:"e1xygdhp0",label:"Placeholder"})("display:flex;flex-direction:column;flex-shrink:0;justify-content:center;background-color:",(function(t){return t.error?t.theme.red100:t.theme.gray200}),";",(function(t){return t.error&&"color: ".concat(t.theme.red300,";")})," width:",(function(t){return t.width}),";height:",(function(t){return t.height}),";",(function(t){return"circle"===t.shape?"border-radius: 100%;":""})," ",(function(t){return"number"==typeof t.bottomGutter&&t.bottomGutter>0?"margin-bottom: ".concat(Object(a.a)(t.bottomGutter),";"):""}));o.defaultProps={shape:"rect",bottomGutter:0,width:"100%",height:"60px"},e.a=o},1745:function(t,e,n){"use strict";var r,a,i,o,c,s,u;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return u})),function(t){t[t.INCIDENT=0]="INCIDENT",t[t.RESOLUTION=1]="RESOLUTION"}(r||(r={})),function(t){t[t.ABOVE=0]="ABOVE",t[t.BELOW=1]="BELOW"}(a||(a={})),function(t){t.ERRORS="events",t.TRANSACTIONS="transactions"}(i||(i={})),function(t){t.SIX_HOURS="6h",t.ONE_DAY="1d",t.THREE_DAYS="3d",t.SEVEN_DAYS="10000m",t.FOURTEEN_DAYS="14d",t.THIRTY_DAYS="30d"}(o||(o={})),function(t){t[t.ONE_MINUTE=1]="ONE_MINUTE",t[t.FIVE_MINUTES=5]="FIVE_MINUTES",t[t.TEN_MINUTES=10]="TEN_MINUTES",t[t.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",t[t.THIRTY_MINUTES=30]="THIRTY_MINUTES",t[t.ONE_HOUR=60]="ONE_HOUR",t[t.TWO_HOURS=120]="TWO_HOURS",t[t.FOUR_HOURS=240]="FOUR_HOURS",t[t.ONE_DAY=1440]="ONE_DAY"}(c||(c={})),function(t){t.EMAIL="email",t.SLACK="slack",t.PAGERDUTY="pagerduty",t.MSTEAMS="msteams",t.SENTRY_APP="sentry_app"}(s||(s={})),function(t){t.SPECIFIC="specific",t.USER="user",t.TEAM="team",t.SENTRY_APP="sentry_app"}(u||(u={}))},1747:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return b}));var r=n(4),a=n(9),i=n(58),o=n(623),c=Object(r.a)("div",{target:"e1ozsfb00",label:"Body"})("padding:",Object(a.a)(2),";margin:0;background-color:",(function(t){return t.theme.white}),";flex-grow:1;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){padding:",Object(a.a)(2)," ",Object(a.a)(4),";}@media (min-width:",(function(t){return t.theme.breakpoints[1]}),"){display:grid;grid-template-columns:66% auto;align-content:start;grid-gap:",Object(a.a)(3),";}@media (min-width:",(function(t){return t.theme.breakpoints[2]}),"){grid-template-columns:minmax(100px,auto) 325px;}"),s=Object(r.a)("div",{target:"e1ozsfb01",label:"HeaderContent"})("display:flex;flex-direction:column;justify-content:normal;margin-bottom:",Object(a.a)(2),";overflow:hidden;max-width:100%;@media (max-width:",(function(t){return t.theme.breakpoints[1]}),"){margin-bottom:",Object(a.a)(1),";}"),u=Object(r.a)("div",{target:"e1ozsfb02",label:"HeaderActions"})("display:flex;flex-direction:column;justify-content:normal;min-width:max-content;@media (max-width:",(function(t){return t.theme.breakpoints[1]}),"){width:max-content;margin-bottom:",Object(a.a)(2),";}"),l=Object(r.a)("h2",{target:"e1ozsfb03",label:"Title"})("font-size:",(function(t){return t.theme.headerFontSize}),";font-weight:normal;line-height:1.2;color:",(function(t){return t.theme.gray700}),";margin-top:",Object(a.a)(3),";margin-bottom:0 !important;min-height:30px;align-self:center;",i.a,";@media (max-width:",(function(t){return t.theme.breakpoints[1]}),"){margin-top:",Object(a.a)(1),";}"),d=Object(r.a)("div",{target:"e1ozsfb04",label:"Header"})("display:flex;flex-direction:row;flex-wrap:wrap;flex-grow:0;justify-content:space-between;padding:",Object(a.a)(2)," ",Object(a.a)(4)," 0 ",Object(a.a)(4),";margin:0;background-color:transparent;border-bottom:1px solid ",(function(t){return t.theme.borderDark}),";@media (max-width:",(function(t){return t.theme.breakpoints[0]}),"){padding:",Object(a.a)(2)," ",Object(a.a)(2)," 0 ",Object(a.a)(2),";}@media (max-width:",(function(t){return t.theme.breakpoints[1]}),"){flex-direction:column;}"),f=(Object(a.a)(.5),Object(a.a)(1),Object(a.a)(2),Object(r.a)("section",{target:"e1ozsfb06",label:"Main"})("grid-column:",(function(t){return t.fullWidth?"1/3":"1/2"}),";max-width:100%;")),b=Object(r.a)("aside",{target:"e1ozsfb07",label:"Side"})({name:"119x2m8",styles:"grid-column:2/3;"})},1799:function(t,e,n){"use strict";function r(t){var e=t.orgSlug,n=t.transaction,r=t.projectID,a=t.query,i=t.unselectedSeries,o=void 0===i?"p100()":i;return{pathname:function(t){var e=t.orgSlug;return"/organizations/".concat(e,"/performance/summary/")}({orgSlug:e}),query:{transaction:n,project:r,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:a.query,unselectedSeries:o}}}n.d(e,"a",(function(){return r}))},1831:function(t,e,n){"use strict";var r,a,i,o,c;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return c})),function(t){t[t.DETECTED=0]="DETECTED",t[t.CREATED=1]="CREATED",t[t.TRIGGERED=2]="TRIGGERED"}(r||(r={})),function(t){t[t.CREATED=0]="CREATED",t[t.DETECTED=1]="DETECTED",t[t.STATUS_CHANGE=2]="STATUS_CHANGE",t[t.COMMENT=3]="COMMENT",t[t.STARTED=4]="STARTED"}(a||(a={})),function(t){t[t.OPENED=1]="OPENED",t[t.CLOSED=2]="CLOSED",t[t.WARNING=10]="WARNING",t[t.CRITICAL=20]="CRITICAL"}(i||(i={})),function(t){t[t.MANUAL=1]="MANUAL",t[t.RULE_UPDATED=2]="RULE_UPDATED",t[t.RULE_TRIGGERED=3]="RULE_TRIGGERED"}(o||(o={})),function(t){t[t.PENDING=0]="PENDING",t[t.SNAPSHOT=4]="SNAPSHOT",t[t.DISABLED=5]="DISABLED"}(c||(c={}))},1832:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return g})),n.d(e,"j",(function(){return h})),n.d(e,"i",(function(){return v})),n.d(e,"h",(function(){return y})),n.d(e,"e",(function(){return S})),n.d(e,"f",(function(){return E})),n.d(e,"d",(function(){return T})),n.d(e,"g",(function(){return R})),n.d(e,"a",(function(){return w}));var r,a=n(15),i=n.n(a),o=n(7),c=n.n(o),s=n(3),u=n(55),l=n(53),d=n(376),f=n(1745),b=n(1929),p=n(1831);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/"))}function g(t,e,n){return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/stats/"))}function h(t,e,n,r){var a=r?"POST":"DELETE";return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/subscriptions/"),{method:a})}function v(t,e,n,r){return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/"),{method:"PUT",data:{status:r}})}function y(t){switch(t.status){case p.c.CLOSED:return!1;default:return!0}}function S(t){var e,n,r=null==t?void 0:t.alertRule,a=null!==(e=null==r?void 0:r.aggregate)&&void 0!==e?e:"",i=null!==(n=null==r?void 0:r.dataset)&&void 0!==n?n:f.c.ERRORS;return b.a.find((function(t){return t.validDataset.includes(i)&&t.match.test(a)}))}function E(t){return{start:Object(l.j)(1e3*t.eventStats.data[0][0]),end:Object(l.j)(1e3*t.eventStats.data[t.eventStats.data.length-1][0])}}function T(t){var e,n=t.orgSlug,r=t.projects,a=t.incident,o=t.stats,c=t.extraQueryParams;if(!(r&&r.length&&a&&o))return"";var s="".concat(a.alertRule.timeWindow,"m"),l=E(o),b=l.start,p=l.end,O=j({id:void 0,name:a&&a.title||"",orderby:"-".concat(Object(u.k)(a.alertRule.aggregate)),yAxis:a.alertRule.aggregate,query:null!==(e=null==a?void 0:a.discoverQuery)&&void 0!==e?e:"",projects:r.filter((function(t){var e=t.slug;return a.projects.includes(e)})).map((function(t){var e=t.id;return Number(e)})),version:2,fields:a.alertRule.dataset===f.c.ERRORS?["issue","count()","count_unique(user)"]:["transaction",a.alertRule.aggregate],start:b,end:p},c),m=d.a.fromSavedQuery(O).getResultsViewUrlTarget(n),g=m.query,h=i()(m,["query"]);return j({query:j({},g,{interval:s})},h)}function R(t){return!t.hasOwnProperty("triggers")}var w=(r={},c()(r,f.c.ERRORS,Object(s.b)("Errors")),c()(r,f.c.TRANSACTIONS,Object(s.b)("Transactions")),r)},1929:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return m}));var r=n(26),a=n.n(r),i=n(7),o=n.n(i),c=n(3),s=n(157),u=n(488),l=n(1799),d=n(1832),f=n(1745);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=[{name:Object(c.b)("Error count"),match:/^count\(\)/,validDataset:[f.c.ERRORS],default:"count()",makeCtaParams:m},{name:Object(c.b)("Users affected"),match:/^count_unique\(tags\[sentry:user\]\)/,validDataset:[f.c.ERRORS],default:"count_unique(tags[sentry:user])",makeCtaParams:m},{name:Object(c.b)("Latency"),match:/^(p[0-9]{2,3}|percentile\(transaction\.duration,[^)]+\)|avg\([^)]+\))/,validDataset:[f.c.TRANSACTIONS],default:"percentile(transaction.duration, 0.95)",makeCtaParams:function(t){return j({opts:t,tooltip:Object(c.b)("Latency by Transaction")})}},{name:Object(c.b)("Apdex"),match:/^apdex\([0-9.]+\)/,validDataset:[f.c.TRANSACTIONS],default:"apdex(300)",makeCtaParams:function(t){return j({opts:t,tooltip:Object(c.b)("Apdex by Transaction")})}},{name:Object(c.b)("Transaction Count"),match:/^count\(\)/,validDataset:[f.c.TRANSACTIONS],default:"count()",makeCtaParams:function(t){return j({opts:t})}},{name:Object(c.b)("Failure rate"),match:/^failure_rate\(\)/,validDataset:[f.c.TRANSACTIONS],default:"failure_rate()",makeCtaParams:function(t){var e,n,r=t.orgSlug,a=t.incident,i=t.projects,o=t.stats;if(!a||!o)return{to:"",buttonText:Object(c.b)("Incident details")};var l=Object(u.c)(null!==(e=a.discoverQuery)&&void 0!==e?e:""),f=null===(n=l.getTagValues("transaction"))||void 0===n?void 0:n.find((function(t){return!t.includes("*")})),b=void 0!==f?{fields:["transaction.status","count()"],orderby:"-count",display:s.d.TOP5}:{fields:["transaction","failure_rate()"],orderby:"-failure_rate",display:s.d.TOP5};return{to:Object(d.d)({orgSlug:r,projects:i,incident:a,stats:o,extraQueryParams:b}),buttonText:Object(c.b)("Open in Discover"),title:void 0===f?Object(c.b)("Failure rate by transaction"):void 0}}}];function j(t){var e,n,r=t.opts,i=r.orgSlug,o=r.projects,f=r.incident,b=r.stats,O=t.tooltip;if(!f||!b)return{to:"",buttonText:Object(c.b)("Incident details")};var j=null===(n=Object(u.c)(null!==(e=f.discoverQuery)&&void 0!==e?e:"").getTagValues("transaction"))||void 0===n?void 0:n.find((function(t){return!t.includes("*")}));if(void 0!==j){var m=Object(d.f)(b);return{to:Object(l.a)({orgSlug:i,transaction:j,projectID:o.filter((function(t){var e=t.slug;return f.projects.includes(e)})).map((function(t){return t.id})),query:p({},m)}),buttonText:Object(c.b)("View Transaction Summary"),title:j}}var g={fields:a()(new Set(["transaction","count()",f.alertRule.aggregate])),orderby:"-count",display:s.d.TOP5};return{to:Object(d.d)({orgSlug:i,projects:o,incident:f,stats:b,extraQueryParams:g}),buttonText:Object(c.b)("Open in Discover"),title:O}}function m(t){var e=t.orgSlug,n=t.projects,r=t.incident,a=t.stats;if(!r)return{buttonText:Object(c.b)("Open in Discover"),to:""};var i={display:s.d.TOP5};return{buttonText:Object(c.b)("Open in Discover"),to:Object(d.d)({orgSlug:e,projects:n,incident:r,stats:a,extraQueryParams:i})}}},1979:function(t,e,n){"use strict";function r(t,e){return t.requestPromise("/promptsactivity/",{method:"PUT",data:{organization_id:e.organizationId,project_id:e.projectId,feature:e.feature,status:e.status}})}n.d(e,"a",(function(){return r}))},2001:function(t,e,n){"use strict";var r=n(4),a=(n(1),n(199)),i=n(9),o=n(0);function c(t){var e=t.className,n=t.image,r=t.children;return Object(o.f)(a.a,{className:e},Object(o.f)(s,null,Object(o.f)(l,null,n),Object(o.f)(u,null,r)))}c.displayName="OnboardingPanel";var s=Object(r.a)("div",{target:"eipqko00",label:"Container"})("padding:",Object(i.a)(3),";position:relative;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width:",(function(t){return t.theme.breakpoints[1]}),"){min-height:350px;}"),u=Object(r.a)("div",{target:"eipqko01",label:"StyledBox"})("z-index:1;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:2;}"),l=Object(r.a)(u,{target:"eipqko02",label:"IlloBox"})("position:relative;min-height:100px;max-width:300px;margin:",Object(i.a)(2)," auto;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:1;margin:",Object(i.a)(3),";max-width:auto;}");e.a=c},2051:function(t,e,n){"use strict";var r=n(5),a=n.n(r),i=(n(1),n(3)),o=n(18),c=n(30),s=n(375),u=n(394),l=n(0),d=function(t){var e=t.router,n=t.organization,r=t.buttonProps,d=t.iconProps;return Object(l.f)(s.a,{organization:n,access:["project:write"]},(function(t){var s=t.hasAccess;return Object(l.f)(c.a,a()({disabled:!s,title:s?void 0:Object(i.b)("Users with admin permission or higher can create alert rules."),onClick:function(t){t.preventDefault(),Object(u.a)("/organizations/".concat(n.slug,"/alerts/:projectId/new/?referrer=alert_stream"),e)},priority:"primary",href:"#",icon:Object(l.f)(o.qb,d)},r),Object(i.b)("Create Alert Rule"))}))};d.displayName="CreateRuleButton",e.a=d},2150:function(t,e,n){"use strict";var r=n(4),a=(n(1),n(18)),i=n(394),o=n(3),c=n(140),s=n(30),u=n(164),l=n(623),d=n(1747),f=n(9),b=n(70),p=n(2051),O=n(0),j=function(t){var e=t.router,n=t.organization,r=t.activeTab;return Object(O.f)(d.b,null,Object(O.f)(m,null,Object(O.f)(g,null,Object(o.b)("Alerts")),Object(O.f)(h,{underlined:!0},Object(O.f)(c.a,{features:["incidents"],organization:n},Object(O.f)("li",{className:"stream"===r?"active":""},Object(O.f)(b.a,{to:"/organizations/".concat(n.slug,"/alerts/")},Object(o.b)("Metric Alerts")))),Object(O.f)("li",{className:"rules"===r?"active":""},Object(O.f)(b.a,{to:"/organizations/".concat(n.slug,"/alerts/rules/")},Object(o.b)("Alert Rules"))))),Object(O.f)(d.c,null,Object(O.f)(v,{gap:1},Object(O.f)(s.a,{size:"small",onClick:function(t){t.preventDefault(),Object(i.a)("/settings/".concat(n.slug,"/projects/:projectId/alerts/"),e)},href:"#",icon:Object(O.f)(a.ob,{size:"xs"})},Object(o.b)("Settings")),Object(O.f)(p.a,{organization:n,router:e,iconProps:{size:"xs"},buttonProps:{size:"small"}}))))};j.displayName="AlertHeader",e.a=j;var m=Object(r.a)(d.d,{target:"eorj8dc0",label:"StyledLayoutHeaderContent"})({name:"gx0lhm",styles:"margin-bottom:0;"}),g=Object(r.a)(d.g,{target:"eorj8dc1",label:"StyledLayoutTitle"})({name:"8kn4zf",styles:"margin-top:0;"}),h=Object(r.a)(l.a,{target:"eorj8dc2",label:"StyledNavTabs"})("margin-top:15px;margin-bottom:0;border-bottom:0 !important;li{margin-right:",Object(f.a)(.5),";}li > a{padding:",Object(f.a)(1)," ",Object(f.a)(2),";}"),v=Object(r.a)(u.a,{target:"eorj8dc3",label:"Actions"})({name:"xgff9b",styles:"height:32px;"})},2697:function(t,e,n){t.exports=n.p+"alerts-empty-state.9078ef.svg"},2942:function(t,e,n){"use strict";n.r(e);var r=n(5),a=n.n(r),i=n(21),o=n.n(i),c=n(28),s=n.n(c),u=n(7),l=n.n(u),d=n(10),f=n.n(d),b=n(11),p=n.n(b),O=n(12),j=n.n(O),m=n(13),g=n.n(m),h=n(6),v=n.n(h),y=n(4),S=n(1),E=n.n(S),T=n(971),R=n.n(T),w=n(118),x=n.n(w),k=n(18),N=n(199),P=n(3),D=n(34),A=n(1712),I=n(140),z=n(30),C=n(164),L=n(615),_=n(75),U=n(47),q=n(618),M=n(1747),G=n(1725),H=n(223),B=n(9),V=n(69),F=n(627),W=n(1979),Y=n(76),Q=n(2150),X=Object(y.a)("div",{target:"e1k7qk1w0",label:"TableLayout"})("display:grid;grid-template-columns:",(function(t){return"open"===t.status?"4fr 1fr 2fr":"3fr 2fr 2fr 1fr 2fr"}),";grid-column-gap:",Object(B.a)(1.5),";width:100%;align-items:center;"),J=Object(y.a)("div",{target:"e1k7qk1w1",label:"TitleAndSparkLine"})("display:",(function(t){return"open"===t.status?"grid":"flex"}),";grid-gap:",Object(B.a)(1),";grid-template-columns:auto 120px;align-items:center;padding-right:",Object(B.a)(2),";overflow:hidden;"),K=n(334),Z=n.n(K),$=n(43),tt=n.n($),et=n(620),nt=n(389),rt=n(279),at=n(283),it=n(70),ot=n(25),ct=n(253),st=n(33),ut=n(251),lt=n(58),dt=n(1831),ft=n(1832),bt=n(37),pt=n.n(bt),Ot=n(1736),jt=n(0);function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var gt=E.a.lazy((function(){return Promise.all([n.e(29),n.e(192)]).then(n.bind(null,2920))})),ht=E.a.lazy((function(){return Promise.all([n.e(29),n.e(193)]).then(n.bind(null,2921))})),vt=function(t){j()(n,t);var e=mt(n);function n(){return f()(this,n),e.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.error,r=t.eventStats;if(n)return Object(jt.f)(Et,{error:n});if(!r)return Object(jt.f)(St,null);var a=r.data.map((function(t){var e=pt()(t,2)[1];return e&&Array.isArray(e)&&e.length&&e[0].count||0}));return Object(jt.f)(E.a.Suspense,{fallback:Object(jt.f)(St,null)},Object(jt.f)("div",{"data-test-id":"incident-sparkline",className:e},Object(jt.f)(gt,{data:a,width:100,height:32},Object(jt.f)(ht,{style:{stroke:ot.a.gray500,fill:"none",strokeWidth:2}}))))}}]),n}(E.a.Component);vt.displayName="SparkLine";var yt=Object(y.a)(vt,{target:"e1ut8dj0",label:"StyledSparkLine"})("flex-shrink:0;width:100%;height:",38,"px;"),St=Object(y.a)(Ot.a,{target:"e1ut8dj1",label:"SparkLinePlaceholder"})("height:",38,"px;"),Et=Object(y.a)(St,{target:"e1ut8dj2",label:"SparklineError"})({name:"mp4ek8",styles:"align-items:center;line-height:1;"}),Tt=yt;function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var wt=function(t){j()(n,t);var e=Rt(n);function n(){var t;f()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).getProject=Z()((function(t,e){return e.find((function(e){return e.slug===t}))})),t}return p()(n,[{key:"getEndpoints",value:function(){var t=this.props,e=t.orgId,n=t.incident;return"open"===t.filteredStatus?[["stats","/organizations/".concat(e,"/incidents/").concat(n.identifier,"/stats/")]]:[]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderError",value:function(){return this.renderBody()}},{key:"renderTimeSince",value:function(t){return Object(jt.f)(kt,null,Object(jt.f)(st.a,{title:Object(jt.f)(et.a,{date:t,utc:!1}),position:"top"},Object(jt.f)(ct.a,{title:"",date:t})))}},{key:"renderStatusIndicator",value:function(){var t=this.props.incident.status,e=t===dt.c.CLOSED,n=t===dt.c.WARNING,r=e?ot.a.gray400:n?ot.a.orange300:ot.a.red300,a=e?Object(P.b)("Resolved"):n?Object(P.b)("Warning"):Object(P.b)("Critical");return Object(jt.f)(st.a,{title:Object(P.c)("Status: [text]",{text:a})},Object(jt.f)(Pt,{color:r}))}},{key:"renderBody",value:function(){var t=this.props,e=t.incident,n=t.orgId,r=t.projectsLoaded,a=t.projects,i=t.filteredStatus,o=this.state,c=o.error,s=o.stats,u=tt()(e.dateStarted),l=tt.a.duration(tt()(e.dateClosed||new Date).diff(u)).as("seconds"),d=e.projects[0];return Object(jt.f)(rt.a,null,Object(jt.f)(It,null,Object(jt.f)(X,{status:i},Object(jt.f)(J,{status:i},Object(jt.f)(Dt,null,this.renderStatusIndicator(),Object(jt.f)(At,{to:"/organizations/".concat(n,"/alerts/").concat(e.identifier,"/")},"Alert #",e.id),e.title),"open"===i&&Object(jt.f)(Tt,{error:c&&Object(jt.f)(xt,null),eventStats:null==s?void 0:s.eventStats})),Object(jt.f)(Nt,{avatarSize:18,project:r?this.getProject(d,a):{slug:d}}),this.renderTimeSince(e.dateStarted),"closed"===i&&Object(jt.f)(nt.a,{seconds:Object(ut.a)({value:l,fixed:1200})}),"closed"===i&&e.dateClosed&&this.renderTimeSince(e.dateClosed))))}},{key:"metricPreset",get:function(){var t=this.props.incident;return t?Object(ft.e)(t):void 0}}]),n}(A.a);function xt(){return Object(jt.f)(st.a,{title:Object(P.b)("Error loading alert stats")},Object(jt.f)(k.Ib,null))}xt.displayName="ErrorLoadingStatsIcon";var kt=Object(y.a)("div",{target:"e12tl7g20",label:"CreatedResolvedTime"})(lt.a," line-height:1.4;display:flex;align-items:center;"),Nt=Object(y.a)(at.a,{target:"e12tl7g21",label:"ProjectBadge"})({name:"6su6fj",styles:"flex-shrink:0;"}),Pt=Object(y.a)("div",{target:"e12tl7g22",label:"StatusIndicator"})("width:10px;height:12px;background:",(function(t){return t.color}),";display:inline-block;border-top-right-radius:40%;border-bottom-right-radius:40%;margin-bottom:-1px;"),Dt=Object(y.a)("span",{target:"e12tl7g23",label:"Title"})(lt.a),At=Object(y.a)(it.a,{target:"e12tl7g24",label:"IncidentLink"})("padding:0 ",Object(B.a)(1),";"),It=Object(y.a)(N.f,{target:"e12tl7g25",label:"IncidentPanelItem"})("font-size:",(function(t){return t.theme.fontSizeMedium}),";padding:",Object(B.a)(1.5)," ",Object(B.a)(2)," ",Object(B.a)(1.5)," 0;"),zt=wt,Ct=n(2051),Lt=n(2001),_t=n(2697),Ut=n.n(_t);function qt(t){var e=t.actions;return Object(jt.f)(Lt.a,{image:Object(jt.f)(Mt,{src:Ut.a})},Object(jt.f)("h3",null,Object(P.b)("More signal, less noise")),Object(jt.f)("p",null,Object(P.b)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")),Object(jt.f)(Gt,{gap:1},e))}qt.displayName="Onboarding";var Mt=Object(y.a)("img",{target:"e1ljbtxe0",label:"AlertsImage"})("@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width:",(function(t){return t.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width:",(function(t){return t.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),Gt=Object(y.a)(C.a,{target:"e1ljbtxe1",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"}),Ht=qt;function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var a=v()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var Wt="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";function Yt(t){return["open","closed"].includes(t)?t:"open"}var Qt=function(t){j()(r,t);var e,n=Ft(r);function r(){return f()(this,r),n.apply(this,arguments)}return p()(r,[{key:"getEndpoints",value:function(){var t=this.props,e=t.params,n=t.location.query,r=Yt(n.status);return[["incidentList","/organizations/".concat(e&&e.orgId,"/incidents/"),{query:Vt({},n,{status:r})}]]}},{key:"onLoadAllEndpointsSuccess",value:(e=s()(o.a.mark((function t(){var e,n,r,a,i,c,s,u,l,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.state.incidentList)&&0===n.length){t.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),t.abrupt("return");case 4:return this.setState({loading:!0}),r=this.props,a=r.params,i=r.location,c=r.organization,t.next=8,this.api.requestPromise("/organizations/".concat(null==a?void 0:a.orgId,"/alert-rules/"),{method:"GET",query:i.query});case 8:if(s=t.sent,!(u=s.length>0)){t.next=13;break}return this.setState({hasAlertRule:u,firstVisitShown:!1,loading:!1}),t.abrupt("return");case 13:return t.next=15,this.api.requestPromise("/promptsactivity/",{query:{organization_id:c.id,feature:"alert_stream"}});case 15:l=t.sent,(d=!(null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.dismissed_ts))&&Object(W.a)(this.api,{feature:"alert_stream",organizationId:c.id,status:"dismissed"}),this.setState({hasAlertRule:u,firstVisitShown:d,loading:!1});case 19:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tryRenderOnboarding",value:function(){if(!this.state.firstVisitShown)return null;var t=Object(jt.f)(E.a.Fragment,null,Object(jt.f)(z.a,{size:"small",external:!0,href:Wt},Object(P.b)("View Features")),Object(jt.f)(Ct.a,a()({},this.props,{iconProps:{size:"xs"},buttonProps:{size:"small"}})));return Object(jt.f)(Ht,{actions:t})}},{key:"tryRenderEmpty",value:function(){var t=this.state,e=t.hasAlertRule,n=t.incidentList,r=Yt(this.props.location.query.status);return!n||n.length>0?null:Object(jt.f)(L.a,{size:"medium",icon:Object(jt.f)(k.i,{isCircled:!0,size:"48"}),title:e?"open"===r?Object(P.b)("No unresolved metric alerts in these projects."):Object(P.b)("No resolved metric alerts in these projects."):Object(P.b)("No metric alert rules exist for these projects."),description:Object(P.c)("Learn more about [link:Metric Alerts]",{link:Object(jt.f)(_.a,{href:Wt})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var t,e,n=this.state,r=n.loading,a=n.incidentList,i=n.incidentListPageLinks,o=n.hasAlertRule,c=this.props.params.orgId,s=new Set(R()(null==a?void 0:a.map((function(t){return t.projects})))),u=!(!a||0!==a.length||void 0!==o),l=r||u,d=Yt(this.props.location.query.status);return Object(jt.f)(E.a.Fragment,null,null!==(t=this.tryRenderOnboarding())&&void 0!==t?t:Object(jt.f)(N.a,null,!r&&Object(jt.f)(Zt,null,Object(jt.f)(X,{status:d},Object(jt.f)(Kt,{status:d},Object(jt.f)("div",null,Object(P.b)("Alert")),"open"===d&&Object(jt.f)("div",null,Object(P.b)("Graph"))),Object(jt.f)("div",null,Object(P.b)("Project")),Object(jt.f)("div",null,Object(P.b)("Triggered")),"closed"===d&&Object(jt.f)("div",null,Object(P.b)("Duration")),"closed"===d&&Object(jt.f)("div",null,Object(P.b)("Resolved")))),l?Object(jt.f)(U.default,null):null!==(e=this.tryRenderEmpty())&&void 0!==e?e:Object(jt.f)(N.c,null,Object(jt.f)(H.a,{orgId:c,slugs:Array.from(s)},(function(t){var e=t.initiallyLoaded,n=t.projects;return a.map((function(t){return Object(jt.f)(zt,{key:t.id,projectsLoaded:e,projects:n,incident:t,orgId:c,filteredStatus:d})}))})))),Object(jt.f)(q.a,{pageLinks:i}))}},{key:"renderBody",value:function(){var t=this.props,e=t.params,n=t.location,r=t.organization,a=t.router,i=n.pathname,o=n.query,c=e.orgId,s=x()(Vt({},o,{status:"open"}),"cursor"),u=x()(Vt({},o,{status:"closed"}),"cursor"),l=Yt(o.status);return Object(jt.f)(G.a,{title:Object(P.b)("Alerts"),objSlug:c},Object(jt.f)(F.a,{organization:r,showDateSelector:!1},Object(jt.f)(Q.a,{organization:r,router:a,activeTab:"stream"}),Object(jt.f)(M.a,null,Object(jt.f)(M.e,{fullWidth:!0},!this.tryRenderOnboarding()&&Object(jt.f)(Jt,{merged:!0,active:l},Object(jt.f)(z.a,{to:{pathname:i,query:s},barId:"open",size:"small"},Object(P.b)("Unresolved")),Object(jt.f)(z.a,{to:{pathname:i,query:u},barId:"closed",size:"small"},Object(P.b)("Resolved"))),this.renderList()))))}}]),r}(A.a),Xt=function(t){j()(n,t);var e=Ft(n);function n(){return f()(this,n),e.apply(this,arguments)}return p()(n,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(t){var e,n;(null===(e=t.location.query)||void 0===e?void 0:e.status)!==(null===(n=this.props.location.query)||void 0===n?void 0:n.status)&&this.trackView()}},{key:"trackView",value:function(){var t=this.props,e=t.location,n=t.organization,r=Yt(e.query.status);Object(D.d)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:n.id,status:r})}},{key:"renderNoAccess",value:function(){return Object(jt.f)(M.a,null,Object(jt.f)(M.e,{fullWidth:!0},Object(jt.f)(Y.b,{type:"warning"},Object(P.b)("You don't have access to this feature"))))}},{key:"render",value:function(){var t=this.props.organization;return Object(jt.f)(I.a,{features:["organizations:incidents"],organization:t,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess},Object(jt.f)(Qt,this.props))}}]),n}(E.a.Component);Xt.displayName="IncidentsListContainer";var Jt=Object(y.a)(C.a,{target:"ebw9n8a0",label:"StyledButtonBar"})("width:100px;margin-bottom:",Object(B.a)(1),";"),Kt=Object(y.a)(J,{target:"ebw9n8a1",label:"PaddedTitleAndSparkLine"})("padding-left:",Object(B.a)(2),";"),Zt=Object(y.a)(N.e,{target:"ebw9n8a2",label:"StyledPanelHeader"})("padding:",Object(B.a)(1.5)," ",Object(B.a)(2)," ",Object(B.a)(1.5)," 0;");e.default=Object(V.a)(Xt)}}]);
//# sourceMappingURL=AlertsList.js.map