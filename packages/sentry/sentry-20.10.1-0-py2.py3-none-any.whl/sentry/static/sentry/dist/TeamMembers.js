(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[198],{1826:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"g",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return f})),r.d(t,"e",(function(){return p}));var a=r(134),n=r(3),o=r(31),c=r(150),s=r(60),i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length,a=new Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];s.a.apply(void 0,[e[t]].concat(a))};function m(e,t,r){return a.a.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){a.a.fetchDetailsSuccess(t.teamId,e),i(r,"success",e)},error:function(e){a.a.fetchDetailsError(t.teamId,e),i(r,"error",e)}})}function u(e,t){a.a.updateSuccess(e,t)}function d(e,t,r){var n="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return a.a.update(t.teamId,t.data),e.request(n,{method:"PUT",data:t.data,success:function(e){u(t.teamId,e),i(r,"success",e)},error:function(e){a.a.updateError(t.teamId,e),i(r,"error",e)}})}function b(e,t,r){var n,o="/organizations/".concat(t.orgId,"/members/").concat(null!==(n=t.memberId)&&void 0!==n?n:"me","/teams/").concat(t.teamId,"/"),s=Object(c.a)();return a.a.update(s,t.teamId),e.request(o,{method:"POST",success:function(e){a.a.updateSuccess(t.teamId,e),i(r,"success",e)},error:function(e){a.a.updateError(s,t.teamId,e),i(r,"error",e)}})}function l(e,t,r){var n="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),o=Object(c.a)();return a.a.update(o,t.teamId),e.request(n,{method:"DELETE",success:function(e){a.a.updateSuccess(t.teamId,e),i(r,"success",e)},error:function(e){a.a.updateError(o,t.teamId,e),i(r,"error",e)}})}function f(e,t,r){return a.a.createTeam(t),e.requestPromise("/organizations/".concat(r.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return a.a.createTeamSuccess(e),Object(o.d)(Object(n.c)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:r.orgId})),e}),(function(e){throw a.a.createTeamError(t.slug,e),Object(o.a)(Object(n.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:r.orgId})),e}))}function p(e,t){return a.a.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return a.a.removeTeamSuccess(t.teamId,e),Object(o.d)(Object(n.c)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw a.a.removeTeamError(t.teamId,e),Object(o.a)(Object(n.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},2870:function(e,t,r){"use strict";r.r(t);var a=r(21),n=r.n(a),o=r(28),c=r.n(o),s=r(10),i=r.n(s),m=r(11),u=r.n(m),d=r(19),b=r.n(d),l=r(12),f=r.n(l),p=r(13),h=r.n(p),g=r(6),j=r.n(g),v=r(4),O=r(1),I=r.n(O),y=r(148),S=r.n(y),M=r(199),w=r(31),z=r(1826),x=r(96),L=r(3),q=r(166),E=r(30),R=r(285),T=r(380),k=r(615),D=r(283),C=r(18),B=r(70),F=r(184),P=r(47),U=r(58),A=r(9),N=r(50),W=r(289),J=r(69),_=r(0);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=j()(e);if(t){var n=j()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return h()(this,r)}}var K=function(e){f()(r,e);var t=H(r);function r(){var e;i()(this,r);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0,error:!1,dropdownBusy:!1,teamMemberList:null,orgMemberList:null},e.debouncedFetchMembersRequest=S()((function(e){var t=this;this.setState({dropdownBusy:!0},(function(){return t.fetchMembersRequest(e)}))}),200),e.fetchMembersRequest=function(){var t=c()(n.a.mark((function t(r){var a,o,c,s,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.params,c=a.api,s=o.orgId,t.prev=2,t.next=5,c.requestPromise("/organizations/".concat(s,"/members/"),{query:{query:r}});case 5:i=t.sent,e.setState({orgMemberList:i,dropdownBusy:!1}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),Object(w.a)(Object(L.b)("Unable to load organization members."),{duration:2e3}),e.setState({dropdownBusy:!1});case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),e.fetchData=c()(n.a.mark((function t(){var r,a,o,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.api,o=r.params,t.prev=1,t.next=4,a.requestPromise("/teams/".concat(o.orgId,"/").concat(o.teamId,"/members/"));case 4:c=t.sent,e.setState({teamMemberList:c,loading:!1,error:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({loading:!1,error:!0,errorResponse:t.t0});case 11:e.fetchMembersRequest("");case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.addTeamMember=function(t){var r=e.props.params;e.setState({loading:!0}),e.debouncedFetchMembersRequest(""),Object(z.c)(e.props.api,{orgId:r.orgId,teamId:r.teamId,memberId:t.value},{success:function(){var r=e.state.orgMemberList.find((function(e){return e.id===t.value}));e.setState({loading:!1,error:!1,teamMemberList:e.state.teamMemberList.concat([r])}),Object(w.d)(Object(L.b)("Successfully added member to team."))},error:function(){e.setState({loading:!1}),Object(w.a)(Object(L.b)("Unable to add team member."))}})},e.handleMemberFilterChange=function(t){e.setState({dropdownBusy:!0}),e.debouncedFetchMembersRequest(t.target.value)},e.renderDropdown=function(t){var r=e.props,a=r.organization,n=r.params,o=new Set(e.state.teamMemberList.map((function(e){return e.id}))),c=a&&a.openMembership,s=t.has("org:write")||t.has("team:admin"),i=c||s,m=(e.state.orgMemberList||[]).filter((function(e){return!o.has(e.id)})).map((function(e){return{searchKey:"".concat(e.name," ").concat(e.email),value:e.id,label:Object(_.f)(Q,null,Object(_.f)(X,{user:e,size:24,className:"avatar"}),Object(_.f)(V,null,e.name||e.email))}})),u=Object(_.f)(Y,null,Object(L.b)("Members"),Object(_.f)(Z,{to:"",onClick:function(){return Object(x.h)({source:"teams"})},"data-test-id":"invite-member"},Object(L.b)("Invite Member")));return Object(_.f)(R.a,{items:m,onSelect:i?e.addTeamMember:function(e){return Object(x.l)({teamId:n.teamId,orgId:n.orgId,memberId:e.value})},menuHeader:u,emptyMessage:Object(L.b)("No members"),onChange:e.handleMemberFilterChange,busy:e.state.dropdownBusy,onClose:function(){return e.debouncedFetchMembersRequest("")}},(function(e){var t=e.isOpen;return Object(_.f)(T.a,{isOpen:t,size:"xsmall","data-test-id":"add-member"},Object(L.b)("Add Member"))}))},e.removeButton=function(t){return Object(_.f)(E.a,{size:"small",icon:Object(_.f)(C.wb,{size:"xs",isCircled:!0}),onClick:e.removeMember.bind(b()(e),t),label:Object(L.b)("Remove")},Object(L.b)("Remove"))},e}return u()(r,[{key:"UNSAFE_componentWillMount",value:function(){this.fetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.params;e.params.teamId===t.teamId&&e.params.orgId===t.orgId||this.setState({loading:!0,error:!1},this.fetchData)}},{key:"removeMember",value:function(e){var t=this,r=this.props.params;Object(z.d)(this.props.api,{orgId:r.orgId,teamId:r.teamId,memberId:e.id},{success:function(){t.setState({teamMemberList:t.state.teamMemberList.filter((function(t){return t.id!==e.id}))}),Object(w.d)(Object(L.b)("Successfully removed member from team."))},error:function(){Object(w.a)(Object(L.b)("There was an error while trying to remove a member from the team."))}})}},{key:"render",value:function(){var e=this;if(this.state.loading)return Object(_.f)(P.default,null);if(this.state.error)return Object(_.f)(F.a,{onRetry:this.fetchData});var t=this.props,r=t.params,a=t.organization,n=t.config,o=new Set(a.access),c=o.has("org:write")||o.has("team:admin");return Object(_.f)(M.a,null,Object(_.f)(M.e,{hasButtons:!0},Object(_.f)("div",null,Object(L.b)("Members")),Object(_.f)("div",{style:{textTransform:"none"}},this.renderDropdown(o))),this.state.teamMemberList.length?this.state.teamMemberList.map((function(t){var a=t.email===n.user.email,o=c||a;return Object(_.f)(G,{key:t.id},Object(_.f)(D.a,{avatarSize:36,member:t,useLink:!0,orgId:r.orgId}),o&&e.removeButton(t))})):Object(_.f)(k.a,{icon:Object(_.f)(C.Fb,{size:"xl"}),size:"large"},Object(L.b)("This team has no members")))}}]),r}(I.a.Component);K.displayName="TeamMembers";var G=Object(v.a)(M.f,{target:"e1jyxppj0",label:"StyledMemberContainer"})({name:"1n5rntj",styles:"justify-content:space-between;align-items:center;"}),Q=Object(v.a)("div",{target:"e1jyxppj1",label:"StyledUserListElement"})("display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object(A.a)(.5),";align-items:center;"),V=Object(v.a)("div",{target:"e1jyxppj2",label:"StyledNameOrEmail"})("font-size:",(function(e){return e.theme.fontSizeSmall}),";",U.a,";"),X=Object(v.a)((function(e){return Object(_.f)(q.a,e)}),{target:"e1jyxppj3",label:"StyledAvatar"})({name:"1hd4yna",styles:"min-width:1.75em;min-height:1.75em;width:1.5em;height:1.5em;"}),Y=Object(v.a)("div",{target:"e1jyxppj4",label:"StyledMembersLabel"})("display:grid;grid-template-columns:1fr max-content;padding:",Object(A.a)(1)," 0;font-size:",(function(e){return e.theme.fontSizeExtraSmall}),";text-transform:uppercase;"),Z=Object(v.a)(B.a,{target:"e1jyxppj5",label:"StyledCreateMemberLink"})({name:"geruia",styles:"text-transform:none;"});t.default=Object(W.a)(Object(N.a)(Object(J.a)(K)))}}]);
//# sourceMappingURL=TeamMembers.js.map