(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[176],{1710:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(10),r=n.n(a),c=n(11),o=n.n(c),i=n(12),s=n.n(i),u=n(13),l=n.n(u),f=n(6),d=n.n(f),p=n(278),m=n.n(p),b=(n(1),n(1712)),h=n(0);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var j=function(e){s()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(m.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(b.a);j.displayName="AsyncView"},1711:function(e,t,n){"use strict";var a=n(15),r=n.n(a),c=n(10),o=n.n(c),i=n(11),s=n.n(i),u=n(12),l=n.n(u),f=n(13),d=n.n(f),p=n(6),m=n.n(p),b=n(4),h=n(1),g=n.n(h),j=n(9),v=n(220),y=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var T=function(e){l()(n,e);var t=O(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.action,c=e.tabs,o=e.noTitleStyles,i=r()(e,["icon","title","action","tabs","noTitleStyles"]);return Object(y.f)("div",i,Object(y.f)(R,null,t&&Object(y.f)(S,null,t),n&&Object(y.f)(w,{tabs:c,styled:o},Object(y.f)(v.a,null,n)),a&&Object(y.f)(k,{tabs:c},a)),c&&Object(y.f)("div",null,c))}}]),n}(g.a.Component);T.displayName="SettingsPageHeading",T.defaultProps={noTitleStyles:!1};var R=Object(b.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),w=Object(b.a)("div",{target:"e1uay4fd1",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(j.a)(4)," ").concat(Object(j.a)(2)," ").concat(Object(j.a)(2)," 0"):"".concat(Object(j.a)(4)," ").concat(Object(j.a)(2)," ").concat(Object(j.a)(4)," 0")}),";flex:1;"),S=Object(b.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(j.a)(1),";"),k=Object(b.a)("div",{target:"e1uay4fd3",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(j.a)(2)):null}),";"),A=Object(b.a)(T,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(j.a)(4),";");t.a=A},1715:function(e,t,n){"use strict";t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a="".concat(e," - ").concat(t);return n?"".concat(a," - Sentry"):a}},1963:function(e,t,n){"use strict";var a=n(21),r=n.n(a),c=n(28),o=n.n(c),i=n(10),s=n.n(i),u=n(11),l=n.n(u),f=n(12),d=n.n(f),p=n(13),m=n.n(p),b=n(6),h=n.n(b),g=n(4),j=n(1),v=n.n(j),y=n(148),O=n.n(y),T=n(29),R=n(199),w=n(18),S=n(3),k=n(30),A=n(183),C=n(285),x=n(380),z=n(615),D=n(70),I=n(9),P=n(50),L=n(0);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var N=function(e){d()(n,e);var t=M(n);function n(){var e;s()(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,teams:null},e.fetchTeams=O()(function(){var t=o()(r.a.mark((function t(n){var a,c,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,c=a.api,o=a.organization,t.next=3,c.requestPromise("/organizations/".concat(o.slug,"/teams/"),{query:{query:n,per_page:T.F}});case 3:i=t.sent,e.setState({teams:i,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T.h),e.handleQueryUpdate=function(t){e.setState({loading:!0}),e.fetchTeams(t.target.value)},e.handleAddTeam=function(t){var n=e.state.teams.find((function(e){return e.slug===t.value}));e.props.onAddTeam(n)},e.handleRemove=function(t){e.props.onRemoveTeam(t)},e}return l()(n,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"renderTeamAddDropDown",value:function(){var e,t=this.props,n=t.disabled,a=t.selectedTeams,r=t.menuHeader,c=this.state.teams,o=null===c||0===c.length,i=n;return e=o?[]:c.filter((function(e){return!a.includes(e.slug)})).map((function(e){return{value:e.slug,searchKey:e.slug,label:Object(L.f)(q,null,"#",e.slug)}})),Object(L.f)(C.a,{items:e,busyItemsStillVisible:this.state.loading,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:Object(S.b)("No teams"),menuHeader:r,disabled:i},(function(e){var t=e.isOpen;return Object(L.f)(x.a,{"aria-label":Object(S.b)("Add Team"),isOpen:t,size:"xsmall",disabled:i},Object(S.b)("Add Team"))}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.organization,a=t.selectedTeams,r=t.disabled,c=t.confirmLastTeamRemoveMessage;if(0===a.length)return Object(L.f)(z.a,null,Object(S.b)("No Teams assigned"));var o=1===a.length&&c?c:null;return a.map((function(t){return Object(L.f)(H,{key:t,orgId:n.slug,team:t,onRemove:e.handleRemove,disabled:r,confirmMessage:o})}))}},{key:"render",value:function(){return Object(L.f)(R.a,null,Object(L.f)(R.e,{hasButtons:!0},Object(S.b)("Team"),this.renderTeamAddDropDown()),Object(L.f)(R.c,null,this.renderBody()))}}]),n}(v.a.Component);N.displayName="TeamSelect";var H=function(e){var t=e.orgId,n=e.team,a=e.onRemove,r=e.disabled,c=e.confirmMessage;return Object(L.f)(B,null,Object(L.f)(E,{to:"/settings/".concat(t,"/teams/").concat(n,"/")},"#".concat(n)),Object(L.f)(A.a,{message:c,bypass:!c,onConfirm:function(){return a(n)},disabled:r},Object(L.f)(k.a,{size:"xsmall",icon:Object(L.f)(w.wb,{isCircled:!0,size:"xs"}),disabled:r},Object(S.b)("Remove"))))};H.displayName="TeamRow";var q=Object(g.a)("div",{target:"e2fk6ws0",label:"TeamDropdownElement"})("padding:",Object(I.a)(.5)," ",Object(I.a)(.25),";text-transform:none;"),B=Object(g.a)(R.f,{target:"e2fk6ws1",label:"TeamPanelItem"})("padding:",Object(I.a)(2),";align-items:center;"),E=Object(g.a)(D.a,{target:"e2fk6ws2",label:"StyledLink"})("flex:1;margin-right:",Object(I.a)(1),";");t.a=Object(P.a)(N)},2840:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),c=n(11),o=n.n(c),i=n(12),s=n.n(i),u=n(13),l=n.n(u),f=n(6),d=n.n(f),p=n(4),m=(n(1),n(0)),b=n(31),h=n(384),g=n(96),j=n(3),v=n(1710),y=n(70),O=n(1711),T=n(1963),R=n(33),w=n(9),S=n(1715);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var A=function(e){s()(n,e);var t=k(n);function n(){var e;r()(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).canCreateTeam=function(){var t=e.props.organization,n=new Set(t.access);return n.has("org:write")&&n.has("team:write")&&n.has("project:write")},e.handleRemove=function(t){if(!e.state.loading){var n=e.props.params,a=n.orgId,r=n.projectId;Object(h.i)(e.api,a,r,t).then((function(){return e.handleRemovedTeam(t)})).catch((function(){Object(b.a)(Object(j.b)("Could not remove the %s team",t)),e.setState({loading:!1})}))}},e.handleRemovedTeam=function(t){e.setState((function(){return{projectTeams:e.state.projectTeams.filter((function(e){return e.slug!==t}))}}))},e.handleAddedTeam=function(t){e.setState((function(){return{projectTeams:e.state.projectTeams.concat([t])}}))},e.handleAdd=function(t){if(!e.state.loading){var n=e.props.params,a=n.orgId,r=n.projectId;Object(h.a)(e.api,a,r,t).then((function(){e.handleAddedTeam(t)}),(function(){e.setState({error:!0,loading:!1})}))}},e.handleCreateTeam=function(t){var n=e.props,a=n.project,r=n.organization;e.canCreateTeam()&&(t.stopPropagation(),t.preventDefault(),Object(g.d)({project:a,organization:r,onClose:function(t){Object(h.a)(e.api,r.slug,a.slug,t).then(e.remountComponent,e.remountComponent)}}))},e}return o()(n,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId;return[["projectTeams","/projects/".concat(t,"/").concat(n,"/teams/")]]}},{key:"getTitle",value:function(){var e=this.props.params.projectId;return Object(S.a)(Object(j.b)("Project Teams"),e,!1)}},{key:"renderBody",value:function(){var e=this.props,t=e.params,n=e.organization,a=this.canCreateTeam(),r=n.access.includes("project:write"),c=Object(j.b)("This is the last team with access to this project. Removing it will mean only organization owners and managers will be able to access the project pages. Are you sure you want to remove this team from the project %s?",t.projectId),o=this.state.projectTeams.map((function(e){return e.slug})),i=Object(m.f)(C,null,Object(j.b)("Teams"),Object(m.f)(R.a,{disabled:a,title:Object(j.b)("You must be a project admin to create teams"),position:"top"},Object(m.f)(x,{to:"",disabled:!a,onClick:this.handleCreateTeam},Object(j.b)("Create Team"))));return Object(m.f)("div",null,Object(m.f)(O.a,{title:Object(j.b)("%s Teams",t.projectId)}),Object(m.f)(T.a,{organization:n,selectedTeams:o,onAddTeam:this.handleAdd,onRemoveTeam:this.handleRemove,menuHeader:i,confirmLastTeamRemoveMessage:c,disabled:!r}))}}]),n}(v.a),C=Object(p.a)("div",{target:"e1oyzggu0",label:"StyledTeamsLabel"})("font-size:0.875em;padding:",Object(w.a)(.5),";text-transform:uppercase;"),x=Object(p.a)(y.a,{target:"e1oyzggu1",label:"StyledCreateTeamLink"})("float:right;text-transform:none;",(function(e){return e.disabled&&Object(m.e)("cursor:not-allowed;color:",e.theme.gray500,";opacity:0.6;;label:StyledCreateTeamLink;")}),";");t.default=A}}]);
//# sourceMappingURL=ProjectTeams.js.map