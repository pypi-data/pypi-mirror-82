(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[90],{1729:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(624),a=r.n(n),o=r(487);function i(t,e){var r,n,i,s,c=e.routes,u=e.params,p=e.location,l=e.stepBack,f=c.map((function(t){return t.path||""}));"string"!=typeof t?(s=c.indexOf(t)+1,i=a()(f.slice(0,s),(function(t){return"/"===t[0]}))):i=a()(f,(function(t){return"/"===t[0]}));var d=f.slice(i,s);void 0!==l&&(d=d.slice(0,l));var h=null!==(r=null==p?void 0:p.search)&&void 0!==r?r:"",v=null!==(n=null==p?void 0:p.hash)&&void 0!==n?n:"",g="".concat(d.join("")).concat("string"!=typeof t?"":t).concat(h).concat(v);return Object(o.a)(g,u)}},2956:function(t,e,r){"use strict";r.r(e);var n=r(5),a=r.n(n),o=r(15),i=r.n(o),s=r(10),c=r.n(s),u=r(11),p=r.n(u),l=r(12),f=r.n(l),d=r(13),h=r.n(d),v=r(6),g=r.n(v),y=r(1),b=r.n(y),m=r(34),j=r(282),O=r(69),k=r(7),w=r.n(k),S=r(21),D=r.n(S),x=r(28),P=r.n(x),R=r(278),E=r.n(R),I=r(2),T=r.n(I),C=r(8),G=r(42),z=r(366),_=r(220),U=r(60),q=r(3),L=r(627),M=r(65),N=r(184),A=r(47),F=r(223),W=r(141),H=r(1729),J=r(50),B="GROUP_NOT_FOUND",V=r(665),K=r(106),Q=r(0);function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){w()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h()(this,r)}}var $=function(t){f()(a,t);var e,r,n=Z(a);function a(){var t;c()(this,a);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=n.call.apply(n,[this].concat(r))).state=t.initialState,t.remountComponent=function(){t.setState(t.initialState),t.fetchData()},t.listener=M.a.listen((function(e){return t.onGroupChange(e)}),void 0),t}return p()(a,[{key:"getChildContext",value:function(){return{group:this.state.group,location:this.props.location}}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(t,e){var r,n;t.isGlobalSelectionReady!==this.props.isGlobalSelectionReady&&this.fetchData(),(!(null==e?void 0:e.group)&&this.state.group||(null===(r=t.params)||void 0===r?void 0:r.eventId)!==(null===(n=this.props.params)||void 0===n?void 0:n.eventId)&&this.state.group)&&this.getEvent(this.state.group)}},{key:"componentWillUnmount",value:function(){M.a.reset(),Object(U.a)(this.listener)}},{key:"getEvent",value:(r=P()(D.a.mark((function t(e){var r,n,a,o,i,s,c,u,p,l;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.props,n=r.params,a=r.environments,o=r.api,i=r.organization,s=i.slug,c=e.id,u=e.project.slug,p=(null==n?void 0:n.eventId)||"latest",t.prev=5,t.next=8,Object(V.a)(o,s,u,c,p,a);case 8:l=t.sent,this.setState({event:l,loading:!1,error:!1,errorType:null}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),G.c(t.t0),this.setState({error:!0,errorType:null,loading:!1});case 16:case"end":return t.stop()}}),t,this,[[5,12]])}))),function(t){return r.apply(this,arguments)})},{key:"fetchData",value:(e=P()(D.a.mark((function t(){var e,r,n,a,o,i,s,c,u,p,l;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,r=e.environments,n=e.api,e.isGlobalSelectionReady){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,n.requestPromise(this.groupDetailsEndpoint,{query:Y({},r?{environment:r}:{})});case 6:if(a=t.sent,this.props.params.groupId===a.id){t.next=11;break}return o=this.props,i=o.routes,s=o.params,c=o.location,C.browserHistory.push(Object(H.a)("",{routes:i,location:c,params:Y({},s,{groupId:a.id})})),t.abrupt("return");case 11:(u=a.project)?(void 0===(p=Y({},this.props.location)).query.project&&void 0===p.query._allp&&(p.query.project=u.id),delete p.query._allp,C.browserHistory.replace(p)):G.m((function(){G.c(new Error("Project not found"))})),this.setState({project:u}),M.a.loadInitialData([a]),t.next=26;break;case 17:t.prev=17,t.t0=t.catch(3),l=null,t.t1=null===t.t0||void 0===t.t0?void 0:t.t0.status,t.next=404===t.t1?23:25;break;case 23:return l=B,t.abrupt("break",25);case 25:this.setState({error:!0,errorType:l,loading:!1});case 26:case"end":return t.stop()}}),t,this,[[3,17]])}))),function(){return e.apply(this,arguments)})},{key:"onGroupChange",value:function(t){var e=this.props.params.groupId;if(t.has(e)){var r=M.a.get(e);if(r){if(r.stale)return void this.fetchData();this.setState({group:r})}}}},{key:"getTitle",value:function(){var t=this.state.group;if(!t)return"Sentry";switch(t.type){case"error":return t.metadata.type&&t.metadata.value?"".concat(t.metadata.type,": ").concat(t.metadata.value):t.metadata.type||t.metadata.value||"Sentry";case"csp":return t.metadata.message||"Sentry";case"expectct":case"expectstaple":case"hpkp":return t.metadata.message||"Sentry";case"default":return t.metadata.title||"Sentry";default:return""}}},{key:"renderError",value:function(){if(!this.state.error)return null;switch(this.state.errorType){case B:return Object(Q.f)(N.a,{message:Object(q.b)("The issue you were looking for was not found.")});default:return Object(Q.f)(N.a,{onRetry:this.remountComponent})}}},{key:"renderContent",value:function(t){var e=this.props,r=e.children,n=e.environments,a=e.organization,o=e.routes,i=o[o.length-1].props,s=i.currentTab,c=i.isEventRoute,u=this.state.group,p=this.state.event,l=c?"/organizations/".concat(a.slug,"/issues/").concat(u.id,"/events/").concat(p.id,"/"):"/organizations/".concat(a.slug,"/issues/").concat(u.id,"/"),f={environments:n,group:u,project:t};return s===K.a.DETAILS&&(f=Y({},f,{event:p})),s===K.a.TAGS&&(f=Y({},f,{event:p,baseUrl:l})),Object(Q.f)(b.a.Fragment,null,Object(Q.f)(K.b,{project:t,group:u,currentTab:s,baseUrl:l}),b.a.isValidElement(r)?b.a.cloneElement(r,f):r)}},{key:"render",value:function(){var t=this,e=this.props.organization,r=this.state,n=r.error,a=r.group,o=r.project,i=n,s=r.loading||!a&&!i;return Object(Q.f)(E.a,{title:this.getTitle()},Object(Q.f)(L.a,{skipLoadLastUsed:!0,forceProject:o,showDateSelector:!1,shouldForceProject:!0,lockedMessageSubject:Object(q.b)("issue"),showIssueStreamLink:!0,showProjectSettingsLink:!0},Object(Q.f)(_.b,null,s?Object(Q.f)(A.default,null):i?this.renderError():Object(Q.f)(F.a,{orgId:e.slug,slugs:[o.slug],"data-test-id":"group-projects-container"},(function(e){var r=e.projects,n=e.initiallyLoaded,a=e.fetchError;return n?a?Object(Q.f)(N.a,{message:Object(q.b)("Error loading the specified project")}):t.renderContent(r[0]):Object(Q.f)(A.default,null)})))))}},{key:"initialState",get:function(){return{group:null,loading:!0,error:!1,errorType:null,project:null}}},{key:"groupDetailsEndpoint",get:function(){return"/issues/".concat(this.props.params.groupId,"/")}}]),a}(b.a.Component);$.displayName="GroupDetails",$.childContextTypes={group:W.a.Group,location:T.a.object};var tt=Object(J.a)(z.c($));function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var a=g()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h()(this,r)}}var rt=function(t){f()(r,t);var e=et(r);function r(t){var n;return c()(this,r),(n=e.call(this,t)).startMetricCollection(),n}return p()(r,[{key:"componentDidMount",value:function(){Object(m.a)("issue_page.viewed",{group_id:parseInt(this.props.params.groupId,10),org_id:parseInt(this.props.organization.id,10)})}},{key:"startMetricCollection",value:function(){var t=Object(O.b)(this.props.organization)?"cold-start":"warm-start";m.b.mark({name:"page-issue-details-start",data:{start_type:t}})}},{key:"render",value:function(){var t=this.props,e=t.selection,r=i()(t,["selection"]);return Object(Q.f)(tt,a()({key:"".concat(this.props.params.groupId,"-envs:").concat(e.environments.join(",")),environments:e.environments},r))}}]),r}(b.a.Component);rt.displayName="OrganizationGroupDetails";e.default=Object(O.a)(Object(j.a)(rt))}}]);
//# sourceMappingURL=GroupDetails.js.map