(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[199],{2198:function(t,e,n){"use strict";var r=n(10),a=n.n(r),c=n(11),o=n.n(c),s=n(12),i=n.n(s),l=n(13),u=n.n(l),f=n(6),p=n.n(f),d=n(4),j=n(1),h=n.n(j),b=n(658),m=n(70),g=n(5),v=n.n(g),y=n(15),O=n.n(y),k=n(0);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var R=function(t){i()(n,t);var e=P(n);function n(){return a()(this,n),e.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var t=this.props,e=t.project,n=O()(t,["project"]);return Object(k.f)("span",v()({className:"project-label"},n),Object(k.f)("span",{className:"project-name"},e.slug))}}]),n}(h.a.PureComponent);R.displayName="ProjectLabel";var S=n(9);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var w=function(t){i()(n,t);var e=z(n);function n(){var t;a()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={isBookmarked:t.props.project.isBookmarked},t.handleToggleBookmark=function(e){t.setState({isBookmarked:e})},t}return o()(n,[{key:"render",value:function(){var t=this.props,e=t.project,n=t.organization;return Object(k.f)(x,null,Object(k.f)(I,{organization:n,project:e,isBookmarked:this.state.isBookmarked,onToggle:this.handleToggleBookmark}),Object(k.f)(m.a,{to:"/settings/".concat(n.slug,"/projects/").concat(e.slug,"/")},Object(k.f)(R,{project:e})))}}]),n}(h.a.Component);w.displayName="ProjectItem";var x=Object(d.a)("div",{target:"e15nsoxf0",label:"Wrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),I=Object(d.a)(b.a,{target:"e15nsoxf1",label:"BookmarkLink"})("margin-right:",Object(S.a)(1),";margin-top:-",Object(S.a)(.25),";");e.a=w},2871:function(t,e,n){"use strict";n.r(e),n.d(e,"TeamProjects",(function(){return W}));var r=n(5),a=n.n(r),c=n(37),o=n.n(c),s=n(10),i=n.n(s),l=n(11),u=n.n(l),f=n(12),p=n.n(f),d=n(13),j=n.n(d),h=n(6),b=n.n(h),m=n(4),g=n(1),v=n.n(g),y=n(199),O=n(31),k=n(27),P=n(18),R=n(3),S=n(30),z=n(285),w=n(380),x=n(615),I=n(184),L=n(47),T=n(618),q=n(41),A=n(2198),B=n(33),D=n(9),C=n(50),N=n(69),U=n(0);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j()(this,n)}}var W=function(t){p()(n,t);var e=E(n);function n(){var t;i()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={error:!1,loading:!0,pageLinks:null,unlinkedProjects:[],linkedProjects:[]},t.fetchAll=function(){t.fetchTeamProjects(),t.fetchUnlinkedProjects()},t.fetchTeamProjects=function(){var e=t.props,n=e.location,r=e.params,a=r.orgId,c=r.teamId;t.setState({loading:!0}),t.props.api.requestPromise("/organizations/".concat(a,"/projects/"),{query:{query:"team:".concat(c),cursor:n.query.cursor||""},includeAllArgs:!0}).then((function(e){var n=o()(e,3),r=n[0],a=(n[1],n[2]);t.setState({loading:!1,error:!1,linkedProjects:r,pageLinks:a.getResponseHeader("Link")})})).catch((function(){t.setState({loading:!1,error:!0})}))},t.fetchUnlinkedProjects=function(e){var n=t.props.params,r=n.orgId,a=n.teamId;t.props.api.requestPromise("/organizations/".concat(r,"/projects/"),{query:{query:e?"!team:".concat(a," ").concat(e):"!team:".concat(a)}}).then((function(e){t.setState({unlinkedProjects:e})}))},t.handleLinkProject=function(e,n){var r=t.props.params,a=r.orgId,c=r.teamId;t.props.api.request("/projects/".concat(a,"/").concat(e.slug,"/teams/").concat(c,"/"),{method:"add"===n?"POST":"DELETE",success:function(e){t.fetchAll(),q.a.updateSuccess(e),Object(O.d)("add"===n?Object(R.b)("Successfully added project to team."):Object(R.b)("Successfully removed project from team"))},error:function(){Object(O.a)(Object(R.b)("Wasn't able to change project association."))}})},t.handleProjectSelected=function(e){var n=t.state.unlinkedProjects.find((function(t){return t.id===e.value}));t.handleLinkProject(n,"add")},t.handleQueryUpdate=function(e){t.fetchUnlinkedProjects(e.target.value)},t}return u()(n,[{key:"componentDidMount",value:function(){this.fetchAll()}},{key:"componentDidUpdate",value:function(t){t.params.orgId===this.props.params.orgId&&t.params.teamId===this.props.params.teamId||this.fetchAll(),t.location!==this.props.location&&this.fetchTeamProjects()}},{key:"projectPanelContents",value:function(t){var e=this,n=this.props.organization,r=new Set(n.access).has("org:write");return t.length?Object(k.v)(t).map((function(t){return Object(U.f)(J,{key:t.id},Object(U.f)(A.a,{project:t,organization:n}),Object(U.f)(B.a,{disabled:r,title:Object(R.b)("You do not have enough permission to change project association.")},Object(U.f)(S.a,{size:"small",disabled:!r,icon:Object(U.f)(P.wb,{isCircled:!0,size:"xs"}),onClick:function(){e.handleLinkProject(t,"remove")}},Object(R.b)("Remove"))))})):Object(U.f)(x.a,{size:"large",icon:Object(U.f)(P.B,{size:"xl"})},Object(R.b)("This team doesn't have access to any projects."))}},{key:"render",value:function(){var t=this,e=this.state,n=e.linkedProjects,r=e.unlinkedProjects,c=e.error,o=e.loading;if(c)return Object(U.f)(I.a,{onRetry:function(){return t.fetchAll()}});if(o)return Object(U.f)(L.default,null);var s=new Set(this.props.organization.access),i=r.map((function(t){return{value:t.id,searchKey:t.slug,label:Object(U.f)(M,null,t.slug)}}));return Object(U.f)(v.a.Fragment,null,Object(U.f)(y.a,null,Object(U.f)(y.e,{hasButtons:!0},Object(U.f)("div",null,Object(R.b)("Projects")),Object(U.f)("div",{style:{textTransform:"none"}},s.has("org:write")?Object(U.f)(z.a,{items:i,onChange:this.handleQueryUpdate,onSelect:this.handleProjectSelected,emptyMessage:Object(R.b)("No projects")},(function(t){var e=t.isOpen;return Object(U.f)(w.a,{isOpen:e,size:"xsmall"},Object(R.b)("Add Project"))})):Object(U.f)(w.a,{disabled:!0,title:Object(R.b)("You do not have enough permission to associate a project."),size:"xsmall"},Object(R.b)("Add Project")))),Object(U.f)(y.c,null,this.projectPanelContents(n))),Object(U.f)(T.a,a()({pageLinks:this.state.pageLinks},this.props)))}}]),n}(v.a.Component);W.displayName="TeamProjects";var J=Object(m.a)(y.f,{target:"eqsa6vb0",label:"StyledPanelItem"})("display:flex;align-items:center;justify-content:space-between;padding:",Object(D.a)(2),";"),M=Object(m.a)("div",{target:"eqsa6vb1",label:"ProjectListElement"})("padding:",Object(D.a)(.25)," 0;");e.default=Object(C.a)(Object(N.a)(W))}}]);
//# sourceMappingURL=TeamProjects.js.map