(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[89],{1868:function(e,t,r){"use strict";r(1);var s=r(3),n=r(27),i=r(30),o=r(18),a=r(75),c=r(0),u=[{icon:Object(c.f)(o.D,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}},{icon:Object(c.f)(o.e,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commits/").concat(r)}},{icon:Object(c.f)(o.Hb,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}},{icon:Object(c.f)(o.E,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:function(e){var t=e.baseUrl,r=e.commitId;return"".concat(t,"/commit/").concat(r)}}];t.a=function(e){var t=e.inline,r=e.commitId,o=e.repository;if(!r||!o)return Object(c.f)("span",null,Object(s.b)("Unknown Commit"));var d=Object(n.l)(r),l=u.find((function(e){return!!o.provider&&e.providerIds.includes(o.provider.id)}));if(void 0===l)return Object(c.f)("span",null,d);var b=o.url&&l.commitUrl({commitId:r,baseUrl:o.url});return t?Object(c.f)(a.a,{className:"inline-commit",href:b},l.icon," "+d):Object(c.f)(i.a,{external:!0,href:b,size:"small",icon:l.icon},d)}},2148:function(e,t,r){"use strict";r(1);var s=r(75),n=r(18),i=r(0);t.a=function(e){var t=e.pullRequest,r=e.repository,o=e.inline,a="".concat(r.name," #").concat(t.id,": ").concat(t.title);return t.externalUrl?Object(i.f)(s.a,{className:o?"inline-commit":"btn btn-default btn-sm",href:t.externalUrl},function(e){if(!e.provider)return null;var t=e.provider.id;switch(t.includes(":")?t.split(":").pop():t){case"github":return Object(i.f)(n.D,{size:"xs"});case"gitlab":return Object(i.f)(n.E,{size:"xs"});case"bitbucket":return Object(i.f)(n.e,{size:"xs"});default:return null}}(r),o?"":" ",a):Object(i.f)("span",null,a)}},2973:function(e,t,r){"use strict";r.r(t),r.d(t,"GroupActivity",(function(){return V}));var s=r(5),n=r.n(s),i=r(21),o=r.n(i),a=r(28),c=r.n(a),u=r(10),d=r.n(u),l=r(11),b=r.n(l),p=r(12),f=r.n(p),m=r(13),h=r.n(m),v=r(6),g=r.n(v),j=r(1),O=r.n(j),y=r(31),I=r(457),k=r(3),w=r(150),U=r(1881),x=r(1851),_=r(35),N=r(279),R=r(2381),S=r(2313),C=r(50),$=r(69),B=r(1868),D=r(389),z=r(145),J=r(2148),q=r(286),W=r(377),A=r(0);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=g()(e);if(t){var n=g()(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return h()(this,r)}}var G=function(e){f()(r,e);var t=P(r);function r(){return d()(this,r),t.apply(this,arguments)}return b()(r,[{key:"render",value:function(){var e=this.props,t=e.author,r=e.item,s=e.orgSlug,n=e.projectId,i=r.data,o="/organizations/".concat(s,"/issues/");switch(r.type){case"note":return Object(k.b)("%s left a comment",t);case"set_resolved":return Object(k.b)("%s marked this issue as resolved",t);case"set_resolved_by_age":return Object(k.b)("%(author)s marked this issue as resolved due to inactivity",{author:t});case"set_resolved_in_release":return i.version?Object(k.b)("%(author)s marked this issue as resolved in %(version)s",{author:t,version:Object(A.f)(W.a,{version:i.version,projectId:n,tooltipRawVersion:!0})}):Object(k.b)("%s marked this issue as resolved in the upcoming release",t);case"set_resolved_in_commit":return Object(k.b)("%(author)s marked this issue as resolved in %(version)s",{author:t,version:Object(A.f)(B.a,{inline:!0,commitId:i.commit&&i.commit.id,repository:i.commit&&i.commit.repository})});case"set_resolved_in_pull_request":return Object(k.b)("%(author)s marked this issue as resolved in %(version)s",{author:t,version:Object(A.f)(J.a,{inline:!0,pullRequest:i.pullRequest,repository:i.pullRequest&&i.pullRequest.repository})});case"set_unresolved":return Object(k.b)("%s marked this issue as unresolved",t);case"set_ignored":return i.ignoreDuration?Object(k.b)("%(author)s ignored this issue for %(duration)s",{author:t,duration:Object(A.f)(D.a,{seconds:60*i.ignoreDuration})}):i.ignoreCount&&i.ignoreWindow?Object(k.c)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:t,count:i.ignoreCount,duration:Object(A.f)(D.a,{seconds:60*i.ignoreWindow})}):i.ignoreCount?Object(k.c)("[author] ignored this issue until it happens [count] time(s)",{author:t,count:i.ignoreCount}):i.ignoreUserCount&&i.ignoreUserWindow?Object(k.c)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:t,count:i.ignoreUserCount,duration:Object(A.f)(D.a,{seconds:60*i.ignoreUserWindow})}):i.ignoreUserCount?Object(k.c)("[author] ignored this issue until it affects [count] user(s)",{author:t,count:i.ignoreUserCount}):Object(k.b)("%s ignored this issue",t);case"set_public":return Object(k.b)("%s made this issue public",t);case"set_private":return Object(k.b)("%s made this issue private",t);case"set_regression":return i.version?Object(k.b)("%(author)s marked this issue as a regression in %(version)s",{author:t,version:Object(A.f)(W.a,{version:i.version,projectId:n,tooltipRawVersion:!0})}):Object(k.b)("%s marked this issue as a regression",t);case"create_issue":return Object(k.b)("%(author)s created an issue on %(provider)s titled %(title)s",{author:t,provider:i.provider,title:Object(A.f)("a",{href:i.location},i.title)});case"unmerge_source":return Object(k.d)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",i.fingerprints.length,t,i.destination?Object(A.f)("a",{href:"".concat(o).concat(i.destination.id)},i.destination.shortId):Object(k.b)("a group"));case"unmerge_destination":return Object(k.d)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",i.fingerprints.length,t,i.source?Object(A.f)("a",{href:"".concat(o).concat(i.source.id)},i.source.shortId):Object(k.b)("a group"));case"first_seen":return Object(k.b)("%s first saw this issue",t);case"assigned":var a;if("team"===i.assigneeType){var c=q.a.getById(i.assignee);return a=c?c.slug:"<unknown-team>",Object(k.b)("%(author)s assigned this issue to #%(assignee)s",{author:t,assignee:a})}return r.user&&i.assignee===r.user.id?Object(k.b)("%s assigned this issue to themselves",t):(a=z.a.getById(i.assignee))&&a.email?Object(k.b)("%(author)s assigned this issue to %(assignee)s",{author:t,assignee:a.email}):Object(k.b)("%s assigned this issue to an unknown user",t);case"unassigned":return Object(k.b)("%s unassigned this issue",t);case"merge":return Object(k.d)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",i.issues.length,t);default:return""}}}]),r}(O.a.Component);G.displayName="GroupActivityItem";var E=G;function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=g()(e);if(t){var n=g()(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return h()(this,r)}}function T(){return{detail:Object(k.b)("Unknown error. Please try again.")}}var V=function(e){f()(r,e);var t=K(r);function r(){var e;d()(this,r);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={createBusy:!1,error:!1,inputId:Object(w.a)()},e.handleNoteDelete=function(){var t=c()(o.a.mark((function t(r){var s,n,i,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.modelId,n=r.text,i=e.props,a=i.api,c=i.group,Object(y.b)(Object(k.b)("Removing comment...")),t.prev=3,t.next=6,Object(I.e)(a,c,s,n);case 6:Object(y.e)(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Object(y.a)(Object(k.b)("Failed to delete comment"));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleNoteCreate=function(){var t=c()(o.a.mark((function t(r){var s,n,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.props,n=s.api,i=s.group,e.setState({createBusy:!0}),Object(y.b)(Object(k.b)("Posting comment...")),t.prev=3,t.next=6,Object(I.d)(n,i,r);case 6:e.setState({createBusy:!1,inputId:Object(w.a)()}),Object(y.e)(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),e.setState({createBusy:!1,error:!0,errorJSON:t.t0.responseJSON||T()}),Object(y.a)(Object(k.b)("Unable to post comment"));case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleNoteUpdate=function(){var t=c()(o.a.mark((function t(r,s){var n,i,a,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.modelId,i=s.text,a=e.props,c=a.api,u=a.group,e.setState({updateBusy:!0}),Object(y.b)(Object(k.b)("Updating comment...")),t.prev=4,t.next=7,Object(I.f)(c,u,r,n,i);case 7:e.setState({updateBusy:!1}),Object(y.e)(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),e.setState({updateBusy:!1,error:!0,errorJSON:t.t0.responseJSON||T()}),Object(y.a)(Object(k.b)("Unable to update comment"));case 15:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e,r){return t.apply(this,arguments)}}(),e}return b()(r,[{key:"render",value:function(){var e=this,t=this.props.group,r=_.default.get("user"),s=t&&t.project?[t.project.slug]:[],i={group:t,projectSlugs:s,placeholder:Object(k.b)("Add details or updates to this event. \nTag users with @, or teams with #")};return Object(A.f)("div",{className:"row"},Object(A.f)("div",{className:"col-md-9"},Object(A.f)("div",null,Object(A.f)(x.a,{author:{type:"user",user:r}},(function(){return Object(A.f)(S.a,n()({key:e.state.inputId,storageKey:"groupinput:latest",itemKey:t.id,onCreate:e.handleNoteCreate,busy:e.state.createBusy,error:e.state.error,errorJSON:e.state.errorJSON},i))})),t.activity.map((function(r){var s=r.user?r.user.name:"Sentry";return"note"===r.type?Object(A.f)(N.a,{mini:!0,key:"note-".concat(r.id)},Object(A.f)(R.a,n()({text:r.data.text,modelId:r.id,user:r.user,dateCreated:r.dateCreated,authorName:s,onDelete:e.handleNoteDelete,onUpdate:e.handleNoteUpdate,busy:e.state.updateBusy},i))):Object(A.f)(N.a,{mini:!0,key:"item-".concat(r.id)},Object(A.f)(x.a,{item:r,author:{type:r.user?"user":"system",user:r.user},date:r.dateCreated,header:Object(A.f)(E,{author:Object(A.f)(U.a,null,s),item:r,orgSlug:e.props.params.orgId,projectId:t.project.id})}))})))))}}]),r}(O.a.Component);V.displayName="GroupActivity";t.default=Object(C.a)(Object($.a)(V))}}]);
//# sourceMappingURL=GroupActivity.js.map