(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[79],{1701:function(t,e,n){"use strict";n.r(e),n.d(e,"modalCss",(function(){return G}));var r=n(5),o=n.n(r),a=n(10),c=n.n(a),i=n(11),u=n.n(i),f=n(12),l=n.n(f),s=n(13),d=n.n(s),p=n(6),v=n.n(p),b=n(1),m=n.n(b),h=n(0),y=n(37),g=n.n(y),j=n(21),O=n.n(j),N=n(28),D=n.n(N),x=n(4),k=n(101),w=n(31),E=n(3),I=n(50),S=n(47),A=n(2147),R=n(164),C=n(30),M=n(9);function P(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(t){var e=[Object(E.b)("Type: %s",t.type)];t.hash&&e.push(Object(E.b)("Hash: %s",t.hash)),t.description&&e.push(Object(E.b)("Description: %s",t.description));var n=[e.join("\n")];return t.component&&n.push(function t(e){if(!e.contributes)return[];var n=e.name,r=e.hint,o=n&&r?"".concat(n," (").concat(r,")"):n,a=o?[o]:[];if(e.values){var c,i=P(e.values);try{for(i.s();!(c=i.n()).done;){var u=c.value;if("string"!=typeof u){var f,l=P(t(u));try{for(l.s();!(f=l.n()).done;){var s=f.value;a.push("  ".concat(s))}}catch(t){l.e(t)}finally{l.f()}}else a.push("  ".concat(u))}}catch(t){i.e(t)}finally{i.f()}}return a}(t.component).join("\n")),n}var W=function(t){return Object.values(t).map(q).flat()};function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var H=function(t){l()(r,t);var e=F(r);function r(){var t;c()(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={loading:!0,groupingDiff:!1,baseEvent:[],targetEvent:[],SplitDiffAsync:void 0},t.toggleDiffMode=function(){t.setState((function(t){return{groupingDiff:!t.groupingDiff,loading:!0}}),t.fetchData)},t.fetchEventData=function(){var e=D()(O.a.mark((function e(n,r){var o,a,c,i,u,f,l,s,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.props,a=o.orgId,c=o.project,i=o.api,u=t.state.groupingDiff,f=r,"latest"!==r){e.next=8;break}return e.next=6,i.requestPromise("/issues/".concat(n,"/events/latest/"));case 6:l=e.sent,f=l.eventID;case 8:if(!u){e.next=13;break}return e.next=11,i.requestPromise("/projects/".concat(a,"/").concat(c.slug,"/events/").concat(f,"/grouping-info/"));case 11:return s=e.sent,e.abrupt("return",W(s));case 13:return e.next=15,i.requestPromise("/projects/".concat(a,"/").concat(c.slug,"/events/").concat(f,"/"));case 15:return d=e.sent,e.abrupt("return",Object(A.a)(d));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return u()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var t=this,e=this.props,r=e.baseIssueId,o=e.targetIssueId,a=e.baseEventId,c=e.targetEventId;Promise.all([n.e(225).then(n.bind(null,2922)),this.fetchEventData(r,null!=a?a:"latest"),this.fetchEventData(o,null!=c?c:"latest")]).then((function(e){var n=g()(e,3),r=n[0].default,o=n[1],a=n[2];t.setState({SplitDiffAsync:r,baseEvent:o,targetEvent:a,loading:!1})})).catch((function(){Object(w.a)(Object(E.b)("Error loading events"))}))}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.project,r=this.state,o=r.SplitDiffAsync,a=r.loading,c=r.groupingDiff,i=r.baseEvent,u=r.targetEvent,f=n.features.includes("similarity-view-v2");return Object(h.f)(T,{className:e,loading:a},a&&Object(h.f)(S.default,null),!a&&f&&Object(h.f)($,null,Object(h.f)(R.a,{merged:!0,active:c?"grouping":"event"},Object(h.f)(C.a,{barId:"event",size:"small",onClick:this.toggleDiffMode},Object(E.b)("Diff stacktrace and message")),Object(h.f)(C.a,{barId:"grouping",size:"small",onClick:this.toggleDiffMode},Object(E.b)("Diff grouping information")))),!a&&o&&i.map((function(t,e){var n;return Object(h.f)(o,{key:e,base:t,target:null!==(n=u[e])&&void 0!==n?n:"",type:"words"})})))}}]),r}(m.a.Component);H.displayName="IssueDiff",H.defaultProps={baseEventId:"latest",targetEventId:"latest"};var J=Object(I.a)(H),T=Object(x.a)("div",{shouldForwardProp:function(t){return Object(k.default)(t)&&"loading"!==t},target:"e13n3zub0",label:"StyledIssueDiff"})("background-color:",(function(t){return t.theme.backgroundSecondary}),";overflow:auto;padding:",Object(M.a)(1),";flex:1;display:flex;flex-direction:column;",(function(t){return t.loading&&"\n        background-color: ".concat(t.theme.background,";\n        justify-content: center;\n      ")}),";"),$=Object(x.a)("div",{target:"e13n3zub1",label:"HeaderWrapper"})("display:flex;align-items:center;margin-bottom:",Object(M.a)(2),";");function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=v()(t);if(e){var o=v()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d()(this,n)}}var U=function(t){l()(n,t);var e=B(n);function n(){return c()(this,n),e.apply(this,arguments)}return u()(n,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.Body;return Object(h.f)(n,null,Object(h.f)(J,o()({className:e},this.props)))}}]),n}(m.a.Component);U.displayName="DiffModal";var G={name:"1vh8okv-modalCss",styles:".modal-dialog{display:flex;margin:0;left:10px;right:10px;top:10px;bottom:10px;width:auto;}.modal-content{display:flex;flex:1;}.modal-body{display:flex;overflow:hidden;flex:1;};label:modalCss;"};e.default=U},1821:function(t,e,n){"use strict";function r(t){var e=t.split(/^([a-z]:\\|\\\\)/i.test(t)?"\\":"/");return(e[e.length-1]||e[e.length-2]||t).replace(/\.(dylib|so|a|dll|exe)$/,"")}function o(t,e){return t||e}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))},1882:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(27),o=n(1821);function a(t){var e="";return Object(r.d)(t.filename)?e+='  File "'+t.filename+'"':Object(r.d)(t.module)?e+='  Module "'+t.module+'"':e+="  ?",Object(r.d)(t.lineNo)&&t.lineNo>=0&&(e+=", line "+t.lineNo),Object(r.d)(t.colNo)&&t.colNo>=0&&(e+=", col "+t.colNo),Object(r.d)(t.function)&&(e+=", in "+t.function),Object(r.d)(t.context)&&t.context.forEach((function(n){n[0]===t.lineNo&&(e+="\n    "+Object(r.x)(n[1]))})),e}function c(t,e){return t+Array(Math.max(0,e-t.length)+1).join(" ")}function i(t,e,n){switch(t.platform&&(n=t.platform),n){case"javascript":return function(t){var e="";return Object(r.d)(t.function)?e+="  at "+t.function+"(":e+="  at ? (",Object(r.d)(t.filename)?e+=t.filename:Object(r.d)(t.module)&&(e+=t.module),Object(r.d)(t.lineNo)&&t.lineNo>=0&&(e+=":"+t.lineNo),Object(r.d)(t.colNo)&&t.colNo>=0&&(e+=":"+t.colNo),e+=")"}(t);case"ruby":return function(t){var e="  from ";return Object(r.d)(t.filename)?e+=t.filename:Object(r.d)(t.module)?e+="("+t.module+")":e+="?",Object(r.d)(t.lineNo)&&t.lineNo>=0&&(e+=":"+t.lineNo),Object(r.d)(t.colNo)&&t.colNo>=0&&(e+=":"+t.colNo),Object(r.d)(t.function)&&(e+=":in `"+t.function+"'"),e}(t);case"php":return function(t,e){var n="null"===t.function?"{main}":t.function;return"#".concat(e," ").concat(t.filename||t.module,"(").concat(t.lineNo,"): ").concat(n)}(t,e);case"python":return a(t);case"java":return function(t){var e="    at";return Object(r.d)(t.module)&&(e+=" "+t.module+"."),Object(r.d)(t.function)&&(e+=t.function),Object(r.d)(t.filename)&&(e+="("+t.filename,Object(r.d)(t.lineNo)&&t.lineNo>=0&&(e+=":"+t.lineNo),e+=")"),e}(t);case"objc":case"cocoa":case"native":return function(t){var e="  ";return Object(r.d)(t.package)&&(e+=c(Object(o.b)(t.package),20)),Object(r.d)(t.instructionAddr)&&(e+=c(t.instructionAddr,12)),e+=" "+(t.function||t.symbolAddr),Object(r.d)(t.filename)&&(e+=" ("+t.filename,Object(r.d)(t.lineNo)&&t.lineNo>=0&&(e+=":"+t.lineNo),e+=")"),e}(t);default:return a(t)}}function u(t,e,n){var r=[];return t.frames.forEach((function(t,n){r.push(i(t,n,e))})),"python"!==e&&r.reverse(),n&&r.unshift(function(t,e){switch(e){case"java":return function(t){var e="".concat(t.type,": ").concat(t.value);return t.module&&(e="".concat(t.module,".").concat(e)),e}(t);default:return t.type+": "+t.value}}(n,e)),r.join("\n")}},2147:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1882);function o(t){if(!t||!t.entries)return[];var e=t.entries.find((function(t){return"exception"===t.type}));if(!e){var n,o=t.entries.find((function(t){return"message"===t.type}));return o?(null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.formatted)&&[o.data.formatted]:[]}return e.data?e.data.values.filter((function(t){return!!t.stacktrace})).map((function(e){return Object(r.a)(e.stacktrace,t.platform,e)})).reduce((function(t,e){return t.concat(e)}),[]):[]}}}]);
//# sourceMappingURL=DiffModal.js.map