{"version":3,"sources":["webpack:///./app/components/placeholder.tsx","webpack:///./app/components/activity/item/avatar.tsx","webpack:///./app/actions/repositoryActions.tsx","webpack:///./app/components/commitLink.tsx","webpack:///./app/components/lastCommit.tsx","webpack:///./app/components/repoLabel.tsx","webpack:///./app/actions/releaseActions.tsx","webpack:///./app/stores/releaseStore.tsx","webpack:///./app/utils/withRelease.tsx","webpack:///./app/actionCreators/release.tsx","webpack:///./app/stores/repositoryStore.tsx","webpack:///./app/utils/withRepositories.tsx","webpack:///./app/actionCreators/repositories.tsx","webpack:///./app/components/versionHoverCard.tsx"],"names":["Placeholder","props","className","children","error","data-test-id","p","theme","red100","gray200","red300","width","height","shape","bottomGutter","space","defaultProps","ActivityAvatar","type","user","size","SystemAvatar","StyledIconSentry","gray800","white","IconSentry","Reflux","createActions","SUPPORTED_PROVIDERS","icon","providerIds","commitUrl","baseUrl","commitId","CommitLink","inline","repository","t","shortId","getShortCommitHash","providerData","find","provider","includes","id","undefined","url","href","external","unknownUser","name","username","email","avatarUrl","avatar","avatarUuid","avatarType","ip_address","LastCommit","message","firstLine","split","length","truncated","substr","words","pop","join","this","commit","headerClass","commitAuthor","author","renderMessage","date","dateCreated","React","Component","RepoLabel","overflowEllipsis","gray400","fontSizeSmall","getReleaseStoreKey","projectSlug","releaseVersion","ReleaseStoreConfig","state","orgSlug","release","Map","releaseLoading","releaseError","deploys","deploysLoading","deploysError","listenables","ReleaseActions","init","listenTo","OrganizationActions","update","updateOrganization","reset","trigger","org","slug","loadRelease","releaseKey","loadReleaseError","loadReleaseSuccess","data","loadDeploys","loadDeploysError","loadDeploysSuccess","get","createStore","withRelease","WrappedComponent","createReactClass","displayName","getDisplayName","mixins","ReleaseStore","getInitialState","componentDidMount","fetchRelease","fetchDeploys","api","releaseData","params","path","encodeURIComponent","requestPromise","method","then","res","err","Sentry","scope","setLevel","Warning","setFingerprint","getProjectRelease","getReleaseDeploys","onStoreUpdate","setState","render","RepositoryStoreConfig","RepoActions","repositories","repositoriesLoading","repositoriesError","resetRepositories","loadRepositories","loadRepositoriesError","loadRepositoriesSuccess","INITIAL_STATE","withRepositories","RepositoryStore","repoData","RepositoryActions","fetchRepositories","getRepositories","VersionHoverCard","visible","header","body","ConnectRepo","priority","lastCommit","recentDeploysByEnvironment","reduce","dbe","deploy","dateFinished","environment","hasOwnProperty","mostRecentDeploySlice","Object","keys","slice","HeaderWrapper","VersionWrapper","StyledVersion","version","truncate","anchor","value","ClipboardIconWrapper","newGroups","style","textAlign","commitCount","authors","users","avatarSize","tooltipOptions","container","typeMembers","map","env","idx","key","position","VersionRepoLabel","StyledTimeSince","loading","hasRepos","mini","renderObj","getBody","getRepoLink","withApi","TimeSince","gray500","Version"],"mappings":"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","file":"DiscoverV2Details~OrganizationActivity~PerformanceTransactionDetails~SharedGroupDetails.js","sourcesContent":["import React from 'react';\nimport styled from '@emotion/styled';\nimport PropTypes from 'prop-types';\n\nimport space from 'app/styles/space';\n\nconst defaultProps = {\n  shape: 'rect' as 'rect' | 'circle',\n  bottomGutter: 0 as Parameters<typeof space>[0],\n  width: '100%',\n  height: '60px',\n};\n\ntype DefaultProps = Readonly<typeof defaultProps>;\n\ntype Props = {\n  className?: string;\n  children?: React.ReactNode;\n  error?: React.ReactNode;\n} & Partial<DefaultProps>;\n\nconst Placeholder = styled((props: Props) => {\n  const {className, children, error} = props;\n  return (\n    <div data-test-id=\"loading-placeholder\" className={className}>\n      {error || children}\n    </div>\n  );\n})<Props>`\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  justify-content: center;\n\n  background-color: ${p => (p.error ? p.theme.red100 : p.theme.gray200)};\n  ${p => p.error && `color: ${p.theme.red300};`}\n  width: ${p => p.width};\n  height: ${p => p.height};\n  ${p => (p.shape === 'circle' ? 'border-radius: 100%;' : '')}\n  ${p =>\n    typeof p.bottomGutter === 'number' && p.bottomGutter > 0\n      ? `margin-bottom: ${space(p.bottomGutter)};`\n      : ''}\n`;\n\nPlaceholder.defaultProps = defaultProps;\n\nPlaceholder.propTypes = {\n  shape: PropTypes.oneOf(['rect', 'circle']),\n  width: PropTypes.string,\n  height: PropTypes.string,\n  bottomGutter: PropTypes.number as any,\n};\n\nexport default Placeholder;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from '@emotion/styled';\n\nimport {AvatarUser} from 'app/types';\nimport UserAvatar from 'app/components/avatar/userAvatar';\nimport {IconSentry} from 'app/icons';\nimport Placeholder from 'app/components/placeholder';\nimport SentryTypes from 'app/sentryTypes';\n\ntype Props = {\n  type: 'system' | 'user';\n  user?: AvatarUser;\n  className?: string;\n  size?: number;\n};\n\nfunction ActivityAvatar({className, type, user, size = 38}: Props) {\n  if (user) {\n    return <UserAvatar user={user} size={size} className={className} />;\n  }\n\n  if (type === 'system') {\n    // Return Sentry avatar\n    return (\n      <SystemAvatar className={className} size={size}>\n        <StyledIconSentry size=\"md\" />\n      </SystemAvatar>\n    );\n  }\n\n  return (\n    <Placeholder\n      className={className}\n      width={`${size}px`}\n      height={`${size}px`}\n      shape=\"circle\"\n    />\n  );\n}\n\nActivityAvatar.propTypes = {\n  user: SentryTypes.User,\n  type: PropTypes.oneOf(['system', 'user']),\n  size: PropTypes.number,\n};\n\nexport default ActivityAvatar;\n\ntype SystemAvatarProps = {\n  size: number;\n};\n\nconst SystemAvatar = styled('span')<SystemAvatarProps>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: ${p => p.size}px;\n  height: ${p => p.size}px;\n  background-color: ${p => p.theme.gray800};\n  color: ${p => p.theme.white};\n  border-radius: 50%;\n`;\n\nconst StyledIconSentry = styled(IconSentry)`\n  padding-bottom: 3px;\n`;\n","import Reflux from 'reflux';\n\nexport default Reflux.createActions([\n  'resetRepositories',\n  'loadRepositories',\n  'loadRepositoriesError',\n  'loadRepositoriesSuccess',\n]);\n","import React from 'react';\n\nimport {Repository} from 'app/types';\nimport {t} from 'app/locale';\nimport {getShortCommitHash} from 'app/utils';\nimport Button from 'app/components/button';\nimport {IconBitbucket, IconGithub, IconGitlab, IconVsts} from 'app/icons';\nimport ExternalLink from 'app/components/links/externalLink';\n\ntype CommitFormatterParameters = {\n  baseUrl: string;\n  commitId: string;\n};\n\ntype CommitProvider = {\n  icon: React.ReactNode;\n  providerIds: string[];\n  commitUrl: (CommitFormatterParameters) => string;\n};\n\n// TODO(epurkhiser, jess): This should be moved into plugins.\nconst SUPPORTED_PROVIDERS: Readonly<CommitProvider[]> = [\n  {\n    icon: <IconGithub size=\"xs\" />,\n    providerIds: ['github', 'integrations:github', 'integrations:github_enterprise'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commit/${commitId}`,\n  },\n  {\n    icon: <IconBitbucket size=\"xs\" />,\n    providerIds: ['bitbucket', 'integrations:bitbucket'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commits/${commitId}`,\n  },\n  {\n    icon: <IconVsts size=\"xs\" />,\n    providerIds: ['visualstudio', 'integrations:vsts'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commit/${commitId}`,\n  },\n  {\n    icon: <IconGitlab size=\"xs\" />,\n    providerIds: ['gitlab', 'integrations:gitlab'],\n    commitUrl: ({baseUrl, commitId}) => `${baseUrl}/commit/${commitId}`,\n  },\n];\n\ntype Props = {\n  commitId: string;\n  repository?: Repository;\n  inline?: boolean;\n};\n\nfunction CommitLink({inline, commitId, repository}: Props) {\n  if (!commitId || !repository) {\n    return <span>{t('Unknown Commit')}</span>;\n  }\n\n  const shortId = getShortCommitHash(commitId);\n\n  const providerData = SUPPORTED_PROVIDERS.find(provider => {\n    if (!repository.provider) {\n      return false;\n    }\n    return provider.providerIds.includes(repository.provider.id);\n  });\n\n  if (providerData === undefined) {\n    return <span>{shortId}</span>;\n  }\n\n  const commitUrl =\n    repository.url &&\n    providerData.commitUrl({\n      commitId,\n      baseUrl: repository.url,\n    });\n\n  return !inline ? (\n    <Button external href={commitUrl} size=\"small\" icon={providerData.icon}>\n      {shortId}\n    </Button>\n  ) : (\n    <ExternalLink className=\"inline-commit\" href={commitUrl}>\n      {providerData.icon}\n      {' ' + shortId}\n    </ExternalLink>\n  );\n}\n\nexport default CommitLink;\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {AvatarUser, Commit} from 'app/types';\nimport UserAvatar from 'app/components/avatar/userAvatar';\nimport TimeSince from 'app/components/timeSince';\nimport {t} from 'app/locale';\n\ntype Props = {\n  commit: Commit;\n  headerClass: string;\n};\n\nconst unknownUser: AvatarUser = {\n  id: '',\n  name: '',\n  username: '??',\n  email: '',\n  avatarUrl: '',\n  avatar: {\n    avatarUuid: '',\n    avatarType: 'letter_avatar',\n  },\n  ip_address: '',\n};\n\nclass LastCommit extends React.Component<Props> {\n  static propTypes = {\n    commit: PropTypes.object.isRequired,\n    headerClass: PropTypes.string,\n  };\n\n  renderMessage(message: Commit['message']): string {\n    if (!message) {\n      return t('No message provided');\n    }\n\n    const firstLine = message.split(/\\n/)[0];\n    if (firstLine.length > 100) {\n      let truncated = firstLine.substr(0, 90);\n      const words = truncated.split(/ /);\n      // try to not have elipsis mid-word\n      if (words.length > 1) {\n        words.pop();\n        truncated = words.join(' ');\n      }\n      return truncated + '...';\n    }\n    return firstLine;\n  }\n\n  render() {\n    const {commit, headerClass} = this.props;\n    const commitAuthor = commit && commit.author;\n    return (\n      <div>\n        <h6 className={headerClass}>Last commit</h6>\n        <div className=\"commit\">\n          <div className=\"commit-avatar\">\n            <UserAvatar user={commitAuthor || unknownUser} />\n          </div>\n          <div className=\"commit-message truncate\">\n            {this.renderMessage(commit.message)}\n          </div>\n          <div className=\"commit-meta\">\n            <strong>{(commitAuthor && commitAuthor.name) || t('Unknown Author')}</strong>\n            &nbsp;\n            <TimeSince date={commit.dateCreated} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LastCommit;\n","import styled from '@emotion/styled';\n\nimport overflowEllipsis from 'app/styles/overflowEllipsis';\n\nconst RepoLabel = styled('span')`\n  /* label mixin from bootstrap */\n  font-weight: 700;\n  color: ${p => p.theme.white};\n  text-align: center;\n  white-space: nowrap;\n  border-radius: 0.25em;\n  /* end of label mixin from bootstrap */\n\n  ${overflowEllipsis};\n\n  display: inline-block;\n  vertical-align: text-bottom;\n  line-height: 1;\n  background: ${p => p.theme.gray400};\n  padding: 3px;\n  max-width: 86px;\n  font-size: ${p => p.theme.fontSizeSmall};\n`;\n\nexport default RepoLabel;\n","import Reflux from 'reflux';\n\nexport default Reflux.createActions([\n  'loadRelease', // Singular as it loads 1 release\n  'loadReleaseError',\n  'loadReleaseSuccess',\n  'loadDeploys', // Plural as it loads all deploys related to a release\n  'loadDeploysError',\n  'loadDeploysSuccess',\n]);\n","import Reflux from 'reflux';\n\nimport ReleaseActions from 'app/actions/releaseActions';\nimport OrganizationActions from 'app/actions/organizationActions';\nimport {Deploy, Organization, Release} from 'app/types';\n\ntype StoreRelease = Map<string, Release>;\ntype StoreDeploys = Map<string, Array<Deploy>>;\ntype StoreLoading = Map<string, boolean>;\ntype StoreError = Map<string, Error>;\n\ntype ReleaseStoreInterface = {\n  get(\n    projectSlug: string,\n    releaseVersion: string\n  ): {\n    release: Release | undefined;\n    releaseLoading: boolean | undefined;\n    releaseError: Error | undefined;\n    deploys: Array<Deploy> | undefined;\n    deploysLoading: boolean | undefined;\n    deploysError: Error | undefined;\n  };\n\n  state: {\n    orgSlug: string | undefined;\n    release: StoreRelease;\n    releaseLoading: StoreLoading;\n    releaseError: StoreError;\n    deploys: StoreDeploys;\n    deploysLoading: StoreLoading;\n    deploysError: StoreError;\n  };\n\n  updateOrganization(org: Organization): void;\n  loadRelease(orgSlug: string, projectSlug: string, releaseVersion: string): void;\n  loadReleaseSuccess(projectSlug: string, releaseVersion: string, data: Release): void;\n  loadReleaseError(projectSlug: string, releaseVersion: string, error: Error): void;\n  loadDeploys(orgSlug: string, projectSlug: string, releaseVersion: string): void;\n  loadDeploysSuccess(projectSlug: string, releaseVersion: string, data: Release): void;\n  loadDeploysError(projectSlug: string, releaseVersion: string, error: Error): void;\n};\n\nexport const getReleaseStoreKey = (projectSlug: string, releaseVersion: string) =>\n  `${projectSlug}${releaseVersion}`;\n\nconst ReleaseStoreConfig: Reflux.StoreDefinition & ReleaseStoreInterface = {\n  state: {\n    orgSlug: undefined,\n    release: new Map() as StoreRelease,\n    releaseLoading: new Map() as StoreLoading,\n    releaseError: new Map() as StoreError,\n    deploys: new Map() as StoreDeploys,\n    deploysLoading: new Map() as StoreLoading,\n    deploysError: new Map() as StoreError,\n  },\n\n  listenables: ReleaseActions,\n\n  init() {\n    this.listenTo(OrganizationActions.update, this.updateOrganization);\n    this.reset();\n  },\n\n  reset() {\n    this.state = {\n      orgSlug: undefined,\n      release: new Map() as StoreRelease,\n      releaseLoading: new Map() as StoreLoading,\n      releaseError: new Map() as StoreError,\n      deploys: new Map() as StoreDeploys,\n      deploysLoading: new Map() as StoreLoading,\n      deploysError: new Map() as StoreError,\n    };\n    this.trigger(this.state);\n  },\n\n  updateOrganization(org: Organization) {\n    this.reset();\n    this.state.orgSlug = org.slug;\n    this.trigger(this.state);\n  },\n\n  loadRelease(orgSlug: string, projectSlug: string, releaseVersion: string) {\n    // Wipe entire store if the user switched organizations\n    if (!this.orgSlug || this.orgSlug !== orgSlug) {\n      this.reset();\n      this.orgSlug = orgSlug;\n    }\n\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n    const {releaseLoading, releaseError, ...state} = this.state;\n\n    this.state = {\n      ...state,\n      releaseLoading: {\n        ...releaseLoading,\n        [releaseKey]: true,\n      },\n      releaseError: {\n        ...releaseError,\n        [releaseKey]: undefined,\n      },\n    };\n    this.trigger(this.state);\n  },\n\n  loadReleaseError(projectSlug: string, releaseVersion: string, error: Error) {\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n    const {releaseLoading, releaseError, ...state} = this.state;\n\n    this.state = {\n      ...state,\n      releaseLoading: {\n        ...releaseLoading,\n        [releaseKey]: false,\n      },\n      releaseError: {\n        ...releaseError,\n        [releaseKey]: error,\n      },\n    };\n    this.trigger(this.state);\n  },\n\n  loadReleaseSuccess(projectSlug: string, releaseVersion: string, data: Release) {\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n    const {release, releaseLoading, releaseError, ...state} = this.state;\n    this.state = {\n      ...state,\n      release: {\n        ...release,\n        [releaseKey]: data,\n      },\n      releaseLoading: {\n        ...releaseLoading,\n        [releaseKey]: false,\n      },\n      releaseError: {\n        ...releaseError,\n        [releaseKey]: undefined,\n      },\n    };\n    this.trigger(this.state);\n  },\n\n  loadDeploys(orgSlug: string, projectSlug: string, releaseVersion: string) {\n    // Wipe entire store if the user switched organizations\n    if (!this.orgSlug || this.orgSlug !== orgSlug) {\n      this.reset();\n      this.orgSlug = orgSlug;\n    }\n\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n    const {deploysLoading, deploysError, ...state} = this.state;\n\n    this.state = {\n      ...state,\n      deploysLoading: {\n        ...deploysLoading,\n        [releaseKey]: true,\n      },\n      deploysError: {\n        ...deploysError,\n        [releaseKey]: undefined,\n      },\n    };\n    this.trigger(this.state);\n  },\n\n  loadDeploysError(projectSlug: string, releaseVersion: string, error: Error) {\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n    const {deploysLoading, deploysError, ...state} = this.state;\n\n    this.state = {\n      ...state,\n      deploysLoading: {\n        ...deploysLoading,\n        [releaseKey]: false,\n      },\n      deploysError: {\n        ...deploysError,\n        [releaseKey]: error,\n      },\n    };\n    this.trigger(this.state);\n  },\n\n  loadDeploysSuccess(projectSlug: string, releaseVersion: string, data: Release) {\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n    const {deploys, deploysLoading, deploysError, ...state} = this.state;\n\n    this.state = {\n      ...state,\n      deploys: {\n        ...deploys,\n        [releaseKey]: data,\n      },\n      deploysLoading: {\n        ...deploysLoading,\n        [releaseKey]: false,\n      },\n      deploysError: {\n        ...deploysError,\n        [releaseKey]: undefined,\n      },\n    };\n    this.trigger(this.state);\n  },\n\n  get(projectSlug: string, releaseVersion: string) {\n    const releaseKey = getReleaseStoreKey(projectSlug, releaseVersion);\n\n    return {\n      release: this.state.release[releaseKey],\n      releaseLoading: this.state.releaseLoading[releaseKey],\n      releaseError: this.state.releaseError[releaseKey],\n      deploys: this.state.deploys[releaseKey],\n      deploysLoading: this.state.deploysLoading[releaseKey],\n      deploysError: this.state.deploysError[releaseKey],\n    };\n  },\n};\n\ntype ReleaseStore = Reflux.Store & ReleaseStoreInterface;\nexport default Reflux.createStore(ReleaseStoreConfig) as ReleaseStore;\n","import React from 'react';\nimport Reflux from 'reflux';\nimport createReactClass from 'create-react-class';\n\nimport {Client} from 'app/api';\nimport {Deploy, Release} from 'app/types';\nimport getDisplayName from 'app/utils/getDisplayName';\nimport ReleaseStore from 'app/stores/releaseStore';\nimport {getProjectRelease, getReleaseDeploys} from 'app/actionCreators/release';\n\ntype DependentProps = {\n  api: Client;\n  orgSlug: string;\n  projectSlug: string;\n  releaseVersion: string;\n};\n\ntype InjectedProps = {\n  release?: Release;\n  releaseLoading?: boolean;\n  releaseError?: Error;\n  deploys?: Array<Deploy>;\n  deploysLoading?: boolean;\n  deploysError?: Error;\n};\n\nconst withRelease = <P extends DependentProps>(\n  WrappedComponent: React.ComponentType<P>\n) =>\n  createReactClass<\n    Omit<P, keyof InjectedProps> & Partial<InjectedProps> & DependentProps,\n    InjectedProps\n  >({\n    displayName: `withRelease(${getDisplayName(WrappedComponent)})`,\n    mixins: [Reflux.listenTo(ReleaseStore, 'onStoreUpdate') as any],\n\n    getInitialState() {\n      const {projectSlug, releaseVersion} = this.props as P & DependentProps;\n      const releaseData = ReleaseStore.get(projectSlug, releaseVersion);\n      return {...releaseData};\n    },\n\n    componentDidMount() {\n      this.fetchRelease();\n      this.fetchDeploys();\n    },\n\n    fetchRelease() {\n      const {api, orgSlug, projectSlug, releaseVersion} = this.props as P &\n        DependentProps;\n      const releaseData = ReleaseStore.get(projectSlug, releaseVersion);\n\n      if (\n        (!releaseData.release && !releaseData.releaseLoading) ||\n        releaseData.releaseError\n      ) {\n        getProjectRelease(api, {orgSlug, projectSlug, releaseVersion});\n      }\n    },\n\n    fetchDeploys() {\n      const {api, orgSlug, projectSlug, releaseVersion} = this.props as P &\n        DependentProps;\n      const releaseData = ReleaseStore.get(projectSlug, releaseVersion);\n\n      if (\n        (!releaseData.deploys && !releaseData.deploysLoading) ||\n        releaseData.deploysError\n      ) {\n        getReleaseDeploys(api, {orgSlug, projectSlug, releaseVersion});\n      }\n    },\n\n    onStoreUpdate() {\n      const {projectSlug, releaseVersion} = this.props as P & DependentProps;\n      const releaseData = ReleaseStore.get(projectSlug, releaseVersion);\n\n      this.setState({...releaseData});\n    },\n\n    render() {\n      return (\n        <WrappedComponent\n          {...(this.props as P & DependentProps)}\n          {...(this.state as InjectedProps)}\n        />\n      );\n    },\n  });\n\nexport default withRelease;\n","import * as Sentry from '@sentry/react';\n\nimport ReleaseActions from 'app/actions/releaseActions';\nimport {Client} from 'app/api';\nimport ReleaseStore, {getReleaseStoreKey} from 'app/stores/releaseStore';\nimport {Deploy, Release} from 'app/types';\n\ntype ParamsGet = {\n  orgSlug: string;\n  projectSlug: string;\n  releaseVersion: string;\n};\n\nexport function getProjectRelease(api: Client, params: ParamsGet) {\n  const {orgSlug, projectSlug, releaseVersion} = params;\n  const path = `/projects/${orgSlug}/${projectSlug}/releases/${encodeURIComponent(\n    releaseVersion\n  )}/`;\n  // HACK(leedongwei): Actions fired by the ActionCreators are queued to\n  // the back of the event loop, allowing another getRelease for the same\n  // release to be fired before the loading state is updated in store.\n  // This hack short-circuits that and update the state immediately.\n  ReleaseStore.state.releaseLoading[\n    getReleaseStoreKey(projectSlug, releaseVersion)\n  ] = true;\n  ReleaseActions.loadRelease(orgSlug, projectSlug, releaseVersion);\n\n  return api\n    .requestPromise(path, {\n      method: 'GET',\n    })\n    .then((res: Release) => {\n      ReleaseActions.loadReleaseSuccess(projectSlug, releaseVersion, res);\n    })\n    .catch(err => {\n      ReleaseActions.loadReleaseError(projectSlug, releaseVersion, err);\n      Sentry.withScope(scope => {\n        scope.setLevel(Sentry.Severity.Warning);\n        scope.setFingerprint(['getRelease-action-creator']);\n        Sentry.captureException(err);\n      });\n    });\n}\n\nexport function getReleaseDeploys(api: Client, params: ParamsGet) {\n  const {orgSlug, projectSlug, releaseVersion} = params;\n  const path = `/organizations/${orgSlug}/releases/${encodeURIComponent(\n    releaseVersion\n  )}/deploys/`;\n\n  // HACK(leedongwei): Same as above\n  ReleaseStore.state.deploysLoading[\n    getReleaseStoreKey(projectSlug, releaseVersion)\n  ] = true;\n  ReleaseActions.loadDeploys(orgSlug, projectSlug, releaseVersion);\n\n  return api\n    .requestPromise(path, {\n      method: 'GET',\n    })\n    .then((res: Deploy[]) => {\n      ReleaseActions.loadDeploysSuccess(projectSlug, releaseVersion, res);\n    })\n    .catch(err => {\n      ReleaseActions.loadDeploysError(projectSlug, releaseVersion, err);\n      Sentry.withScope(scope => {\n        scope.setLevel(Sentry.Severity.Warning);\n        scope.setFingerprint(['getReleaseDeploys-action-creator']);\n        Sentry.captureException(err);\n      });\n    });\n}\n","import Reflux from 'reflux';\n\nimport RepoActions from 'app/actions/repositoryActions';\nimport {Repository} from 'app/types';\n\ntype RepositoryStoreInterface = {\n  get(): {\n    orgSlug?: string;\n    repositories?: Repository[];\n    repositoriesLoading?: boolean;\n    repositoriesError?: Error;\n  };\n\n  state: {\n    orgSlug?: string;\n    repositories?: Repository[];\n    repositoriesLoading?: boolean;\n    repositoriesError?: Error;\n  };\n\n  loadRepositories(orgSlug: string): void;\n  loadRepositoriesSuccess(data: Repository[]): void;\n  loadRepositoriesError(error: Error): void;\n};\n\nexport const RepositoryStoreConfig: Reflux.StoreDefinition & RepositoryStoreInterface = {\n  listenables: RepoActions,\n  state: {\n    orgSlug: undefined,\n    repositories: undefined,\n    repositoriesLoading: undefined,\n    repositoriesError: undefined,\n  },\n\n  init() {\n    this.resetRepositories();\n  },\n\n  resetRepositories() {\n    this.state = {\n      orgSlug: undefined,\n      repositories: undefined,\n      repositoriesLoading: undefined,\n      repositoriesError: undefined,\n    };\n    this.trigger(this.state);\n  },\n\n  loadRepositories(orgSlug: string) {\n    this.state = {\n      orgSlug,\n      repositories: orgSlug === this.state.orgSlug ? this.state.repositories : undefined,\n      repositoriesLoading: true,\n      repositoriesError: undefined,\n    };\n    this.trigger(this.state);\n  },\n\n  loadRepositoriesError(err: Error) {\n    this.state = {\n      ...this.state,\n      repositories: undefined,\n      repositoriesLoading: false,\n      repositoriesError: err,\n    };\n    this.trigger(this.state);\n  },\n\n  loadRepositoriesSuccess(data: Repository[]) {\n    this.state = {\n      ...this.state,\n      repositories: data,\n      repositoriesLoading: false,\n      repositoriesError: undefined,\n    };\n    this.trigger(this.state);\n  },\n\n  get() {\n    return {...this.state};\n  },\n};\n\ntype RepositoryStore = Reflux.Store & RepositoryStoreInterface;\nexport default Reflux.createStore(RepositoryStoreConfig) as RepositoryStore;\n","import React from 'react';\nimport Reflux from 'reflux';\nimport createReactClass from 'create-react-class';\n\nimport {Client} from 'app/api';\nimport {Repository} from 'app/types';\nimport RepositoryActions from 'app/actions/repositoryActions';\nimport {getRepositories} from 'app/actionCreators/repositories';\nimport RepositoryStore from 'app/stores/repositoryStore';\nimport getDisplayName from 'app/utils/getDisplayName';\n\ntype DependentProps = {\n  api: Client;\n  orgSlug: string;\n};\n\ntype InjectedProps = {\n  repositories: Repository[] | undefined;\n  repositoriesLoading: boolean | undefined;\n  repositoriesError: Error | undefined;\n};\n\nconst INITIAL_STATE: InjectedProps = {\n  repositories: undefined,\n  repositoriesLoading: undefined,\n  repositoriesError: undefined,\n};\n\nconst withRepositories = <P extends DependentProps>(\n  WrappedComponent: React.ComponentType<P>\n) =>\n  createReactClass<\n    Omit<P, keyof InjectedProps> & Partial<InjectedProps> & DependentProps,\n    InjectedProps\n  >({\n    displayName: `withRepositories(${getDisplayName(WrappedComponent)})`,\n    mixins: [Reflux.listenTo(RepositoryStore, 'onStoreUpdate') as any],\n\n    getInitialState() {\n      const {orgSlug} = this.props as P & DependentProps;\n      const repoData = RepositoryStore.get();\n\n      if (repoData.orgSlug !== orgSlug) {\n        RepositoryActions.resetRepositories();\n      }\n\n      return repoData.orgSlug === orgSlug\n        ? {...INITIAL_STATE, ...repoData}\n        : {...INITIAL_STATE};\n    },\n\n    componentDidMount() {\n      // XXX(leedongwei): Do not move this function call unless you modify the\n      // unit test named \"prevents repeated calls\"\n      this.fetchRepositories();\n    },\n\n    fetchRepositories() {\n      const {api, orgSlug} = this.props as P & DependentProps;\n      const repoData = RepositoryStore.get();\n\n      // XXX(leedongwei): Do not check the orgSlug here. It would have been\n      // verified at `getInitialState`. The short-circuit hack in actionCreator\n      // does not update the orgSlug in the store.\n      if (\n        (!repoData.repositories && !repoData.repositoriesLoading) ||\n        repoData.repositoriesError\n      ) {\n        getRepositories(api, {orgSlug});\n      }\n    },\n\n    onStoreUpdate() {\n      const repoData = RepositoryStore.get();\n      this.setState({...repoData});\n    },\n\n    render() {\n      return <WrappedComponent {...(this.props as P & DependentProps)} {...this.state} />;\n    },\n  });\n\nexport default withRepositories;\n","import * as Sentry from '@sentry/react';\n\nimport RepositoryActions from 'app/actions/repositoryActions';\nimport {Client} from 'app/api';\nimport RepositoryStore from 'app/stores/repositoryStore';\nimport {Repository} from 'app/types';\n\ntype ParamsGet = {\n  orgSlug: string;\n};\n\nexport function getRepositories(api: Client, params: ParamsGet) {\n  const {orgSlug} = params;\n  const path = `/organizations/${orgSlug}/repos/`;\n\n  // HACK(leedongwei): Actions fired by the ActionCreators are queued to\n  // the back of the event loop, allowing another getRepo for the same\n  // repo to be fired before the loading state is updated in store.\n  // This hack short-circuits that and update the state immediately.\n  RepositoryStore.state.repositoriesLoading = true;\n  RepositoryActions.loadRepositories(orgSlug);\n\n  return api\n    .requestPromise(path, {\n      method: 'GET',\n    })\n    .then((res: Repository[]) => {\n      RepositoryActions.loadRepositoriesSuccess(res);\n    })\n    .catch(err => {\n      RepositoryActions.loadRepositoriesError(err);\n      Sentry.withScope(scope => {\n        scope.setLevel(Sentry.Severity.Warning);\n        scope.setFingerprint(['getRepositories-action-creator']);\n        Sentry.captureException(err);\n      });\n    });\n}\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nimport {t} from 'app/locale';\nimport AvatarList from 'app/components/avatar/avatarList';\nimport Button from 'app/components/button';\nimport Hovercard from 'app/components/hovercard';\nimport LastCommit from 'app/components/lastCommit';\nimport LoadingError from 'app/components/loadingError';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport RepoLabel from 'app/components/repoLabel';\nimport TimeSince from 'app/components/timeSince';\nimport space from 'app/styles/space';\nimport withApi from 'app/utils/withApi';\nimport withRelease from 'app/utils/withRelease';\nimport withRepositories from 'app/utils/withRepositories';\nimport Clipboard from 'app/components/clipboard';\nimport {IconCopy} from 'app/icons';\nimport Version from 'app/components/version';\nimport {Client} from 'app/api';\nimport {Deploy, Release, Repository} from 'app/types';\n\ntype Props = {\n  api: Client;\n  orgSlug: string;\n  projectSlug: string;\n  releaseVersion: string;\n\n  release?: Release;\n  releaseLoading?: boolean;\n  releaseError?: Error;\n  deploys?: Array<Deploy>;\n  deploysLoading?: boolean;\n  deploysError?: Error;\n  repositories?: Array<Repository>;\n  repositoriesLoading?: boolean;\n  repositoriesError?: Error;\n};\ntype State = {\n  visible: boolean;\n};\n\nclass VersionHoverCard extends React.Component<Props, State> {\n  state: State = {\n    visible: false,\n  };\n\n  toggleHovercard() {\n    this.setState({\n      visible: true,\n    });\n  }\n\n  getRepoLink() {\n    const {orgSlug} = this.props;\n    return {\n      header: null,\n      body: (\n        <ConnectRepo>\n          <h5>{t('Releases are better with commit data!')}</h5>\n          <p>\n            {t(\n              'Connect a repository to see commit info, files changed, and authors involved in future releases.'\n            )}\n          </p>\n          <Button href={`/organizations/${orgSlug}/repos/`} priority=\"primary\">\n            {t('Connect a repository')}\n          </Button>\n        </ConnectRepo>\n      ),\n    };\n  }\n\n  getBody() {\n    const {releaseVersion, release, deploys} = this.props;\n    if (release === undefined || deploys === undefined) {\n      return {header: null, body: null};\n    }\n\n    const {lastCommit} = release;\n    const recentDeploysByEnvironment = deploys.reduce(function (dbe, deploy) {\n      const {dateFinished, environment} = deploy;\n      if (!dbe.hasOwnProperty(environment)) {\n        dbe[environment] = dateFinished;\n      }\n\n      return dbe;\n    }, {});\n    let mostRecentDeploySlice = Object.keys(recentDeploysByEnvironment);\n\n    if (Object.keys(recentDeploysByEnvironment).length > 3) {\n      mostRecentDeploySlice = Object.keys(recentDeploysByEnvironment).slice(0, 3);\n    }\n\n    return {\n      header: (\n        <HeaderWrapper>\n          {t('Release')}\n          <VersionWrapper>\n            <StyledVersion version={releaseVersion} truncate anchor={false} />\n\n            <Clipboard value={releaseVersion}>\n              <ClipboardIconWrapper>\n                <IconCopy size=\"xs\" />\n              </ClipboardIconWrapper>\n            </Clipboard>\n          </VersionWrapper>\n        </HeaderWrapper>\n      ),\n      body: (\n        <div>\n          <div className=\"row row-flex\">\n            <div className=\"col-xs-4\">\n              <h6>{t('New Issues')}</h6>\n              <div className=\"count-since\">{release.newGroups}</div>\n            </div>\n            <div className=\"col-xs-8\">\n              <h6 style={{textAlign: 'right'}}>\n                {release.commitCount}{' '}\n                {release.commitCount !== 1 ? t('commits ') : t('commit ')} {t('by ')}{' '}\n                {release.authors.length}{' '}\n                {release.authors.length !== 1 ? t('authors') : t('author')}{' '}\n              </h6>\n              <AvatarList\n                users={release.authors}\n                avatarSize={25}\n                tooltipOptions={{container: 'body'} as any}\n                typeMembers=\"authors\"\n              />\n            </div>\n          </div>\n          {lastCommit && <LastCommit commit={lastCommit} headerClass=\"commit-heading\" />}\n          {deploys.length > 0 && (\n            <div>\n              <div className=\"divider\">\n                <h6 className=\"deploy-heading\">{t('Deploys')}</h6>\n              </div>\n              {mostRecentDeploySlice.map((env, idx) => {\n                const dateFinished = recentDeploysByEnvironment[env];\n                return (\n                  <div className=\"deploy\" key={idx}>\n                    <div className=\"deploy-meta\" style={{position: 'relative'}}>\n                      <VersionRepoLabel>{env}</VersionRepoLabel>\n                      {dateFinished && <StyledTimeSince date={dateFinished} />}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      ),\n    };\n  }\n\n  render() {\n    const {\n      deploysLoading,\n      deploysError,\n      release,\n      releaseLoading,\n      releaseError,\n      repositories,\n      repositoriesLoading,\n      repositoriesError,\n    } = this.props;\n    let header: React.ReactNode = null;\n    let body: React.ReactNode = null;\n\n    const loading = !!(deploysLoading || releaseLoading || repositoriesLoading);\n    const error = deploysError ?? releaseError ?? repositoriesError;\n    const hasRepos = repositories && repositories.length > 0;\n\n    if (loading) {\n      body = <LoadingIndicator mini />;\n    } else if (error) {\n      body = <LoadingError />;\n    } else {\n      const renderObj: {[key: string]: React.ReactNode} =\n        hasRepos && release ? this.getBody() : this.getRepoLink();\n      header = renderObj.header;\n      body = renderObj.body;\n    }\n\n    return (\n      <Hovercard {...this.props} header={header} body={body}>\n        {this.props.children}\n      </Hovercard>\n    );\n  }\n}\n\nexport {VersionHoverCard};\nexport default withApi(withRelease(withRepositories(VersionHoverCard)));\n\nconst ConnectRepo = styled('div')`\n  padding: ${space(2)};\n  text-align: center;\n`;\n\nconst VersionRepoLabel = styled(RepoLabel)`\n  width: 86px;\n`;\n\nconst StyledTimeSince = styled(TimeSince)`\n  color: ${p => p.theme.gray500};\n  position: absolute;\n  left: 98px;\n  width: 50%;\n  padding: 3px 0;\n`;\n\nconst HeaderWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\nconst VersionWrapper = styled('div')`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: flex-end;\n`;\nconst StyledVersion = styled(Version)`\n  margin-right: ${space(0.5)};\n  max-width: 190px;\n`;\nconst ClipboardIconWrapper = styled('span')`\n  &:hover {\n    cursor: pointer;\n  }\n`;\n"],"sourceRoot":""}