(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[20],{1822:function(t,e,r){"use strict";r.d(e,"a",(function(){return D}));var n=r(5),o=r.n(n),c=r(7),i=r.n(c),a=r(15),u=r.n(a),s=r(10),f=r.n(s),l=r(11),d=r.n(l),p=r(12),g=r.n(p),m=r(13),v=r.n(m),b=r(6),y=r.n(b),j=r(1),h=r.n(j);function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var w=r(1810),E=r(0);function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){i()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y()(t);if(e){var o=y()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v()(this,r)}}var D=function(t){g()(r,t);var e=k(r);function r(){return f()(this,r),e.apply(this,arguments)}return d()(r,[{key:"render",value:function(){var t=this.props,e=t.series,r=t.stacked,n=t.xAxis,c=u()(t,["series","stacked","xAxis"]);return Object(E.f)(w.a,o()({},c,{xAxis:null!==n?S({},n||{},{boundaryGap:!0}):null,series:e.map((function(t){var e=t.seriesName,n=t.data,o=u()(t,["seriesName","data"]);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P({},t,{type:"bar"})}(S({name:e,stack:r?"stack1":null,data:n.map((function(t){var e=t.value,r=t.name,n=t.itemStyle;return void 0===n?[r,e]:{value:[r,e],itemStyle:n}}))},o))}))}))}}]),r}(h.a.Component);D.displayName="BarChart"},1883:function(t,e,r){"use strict";r.d(e,"g",(function(){return h})),r.d(e,"h",(function(){return O})),r.d(e,"f",(function(){return P})),r.d(e,"i",(function(){return w})),r.d(e,"k",(function(){return E})),r.d(e,"j",(function(){return q})),r.d(e,"d",(function(){return S})),r.d(e,"c",(function(){return k})),r.d(e,"a",(function(){return D})),r.d(e,"l",(function(){return R})),r.d(e,"b",(function(){return T})),r.d(e,"e",(function(){return _}));var n=r(15),o=r.n(n),c=r(26),i=r.n(c),a=r(37),u=r.n(a),s=r(57),f=r.n(s),l=r(254),d=r.n(l),p=r(43),g=r.n(p),m=r(88),v=r(51),b=r(1983),y=r(630),j=["projects","fields","conditions","aggregations","range","start","end","orderby","limit"];function h(t){var e=new Set([].concat(j,["utc"])),r={};return t.replace(/^\?|\/$/g,"").split("&").forEach((function(t){if(t.includes("=")){var n=t.split("="),o=u()(n,2),c=o[0],i=o[1];e.has(c)&&(r[c]=JSON.parse(decodeURIComponent(i)))}})),r}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((function(t){var e=u()(t,2),r=e[0],n=e[1];return"".concat(r,"=").concat(encodeURIComponent(JSON.stringify(n)))}));return Object.entries(e).forEach((function(t){var e=u()(t,2),n=e[0],o=e[1];r.push("".concat(n,"=").concat(o))})),"?".concat(r.sort().join("&"))}function P(t){var e=t.getColumns(),r=t.getInternal(),n=r.aggregations.filter((function(t){return Object(b.c)(t,e)})),o=n.length>0,c=r.fields.length>0,a=e.reduce((function(t,e){var n=e.name;if(o){var a=c&&!r.fields.includes(n);if(!c||a)return t}return y.g.includes(n)?t:[].concat(i()(t),[{value:n,label:n}])}),[]),u=n.map((function(t){return t[2]})).reduce((function(t,e){return[].concat(i()(t),[{value:e,label:e}])}),[]);return[].concat(i()(a),i()(u))}function w(t,e){var r=e;switch(void 0!==t.savedQueryId&&(r="saved"),r){case"saved":return"saved";default:return"query"}}function E(t,e){return!f()(d()(m.parse(t),j),d()(m.parse(e),j))}function q(t){t.id,t.name,t.dateCreated,t.dateUpdated,t.createdBy;return o()(t,["id","name","dateCreated","dateUpdated","createdBy"])}function S(t,e){var r=new v.a,n="/organizations/".concat(t.slug,"/discover/saved/").concat(e,"/");return r.requestPromise(n,{method:"GET"})}function k(t){var e=new v.a,r="/organizations/".concat(t.slug,"/discover/saved/");return e.requestPromise(r,{method:"GET",query:{all:1,query:"version:1",sortBy:"-dateUpdated"}})}function D(t,e){var r=new v.a,n="/organizations/".concat(t.slug,"/discover/saved/");return r.requestPromise(n,{data:e,method:"POST"})}function R(t,e,r){var n=new v.a,o="/organizations/".concat(t.slug,"/discover/saved/").concat(e,"/");return n.requestPromise(o,{data:r,method:"PUT"})}function T(t,e){var r=new v.a,n="/organizations/".concat(t.slug,"/discover/saved/").concat(e,"/");return r.requestPromise(n,{method:"DELETE"})}function _(){return"Result - ".concat(g.a.utc().format("MMM DD HH:mm:ss"))}},1983:function(t,e,r){"use strict";r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return u}));var n=r(37),o=r.n(n);function c(t,e){var r=new Set(e.map((function(t){return t.name}))),n=o()(t,2),c=n[0],i=n[1];return!!c&&("count()"===c?!i:"uniq"===c?r.has(i||""):("avg"===c||"sum"===c)&&new Set(e.filter((function(t){return"number"===t.type})).map((function(t){return t.name}))).has(i||""))}function i(t){var e=o()(t,2),r=e[0],n=e[1];return r?"count()"===r?"count":"uniq"===r?"uniq(".concat(n,")"):"avg"===r?"avg(".concat(n,")"):"sum"===r?"sum(".concat(n,")"):r:""}function a(t){var e=t.match(/^tags\[(.+)]$/);return e?"tags_".concat(e[1].replace(/[.:-]/,"_")):t.replace(".","_")}function u(t){var e=t.match(/^uniq\((.+)\)$/);if(e&&e[1]){var r=e[1];return["uniq",r,"uniq_".concat(a(r))]}if((e=t.match(/^avg\((.+)\)$/))&&e[1]){var n=e[1];return["avg",n,"avg_".concat(a(n))]}if((e=t.match(/^sum\((.+)\)$/))&&e[1]){var o=e[1];return["sum",o,"sum_".concat(a(o))]}return["count()",null,"count"]}},2386:function(t,e,r){"use strict";r.d(e,"a",(function(){return G}));var n=r(5),o=r.n(n),c=r(26),i=r.n(c),a=r(7),u=r.n(a),s=r(37),f=r.n(s),l=r(1),d=r.n(l),p=r(401),g=r.n(p),m=r(396),v=r.n(m),b=r(102),y=r.n(b),j=r(51),h=r(29),O=r(3),P=r(149),w=r(96),E=r(35),q=r(10),S=r.n(q),k=r(11),D=r.n(k),R=r(12),T=r.n(R),_=r(13),A=r.n(_),C=r(6),x=r.n(C),z=r(87),I=r.n(z),N=r(30),M=r(0);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=x()(t);if(e){var o=x()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return A()(this,r)}}var B=function(t){T()(r,t);var e=U(r);function r(){return S()(this,r),e.apply(this,arguments)}return D()(r,[{key:"renderProject",value:function(t){var e=this.props.organization.projects.find((function(e){return e.id===t.toString()}));return Object(M.f)("li",{key:t},e?e.slug:Object(O.b)("Unknown project ".concat(t)))}},{key:"render",value:function(){var t=this,e=this.props,r=e.validProjects,n=e.invalidProjects,o=r.length?Object(O.b)("You are not currently a member of all of the projects specified by\n          this query. As a result, data for the following projects will be\n          omitted from the displayed results:"):Object(O.b)("You are not currently a member of any of the following projects specified\n           by this query. You may still run this query against other projects you\n           have access to.");return Object(M.f)(I.a,{show:!0,onHide:function(){}},Object(M.f)(z.Header,null,Object(O.b)("Project access")),Object(M.f)(z.Body,null,Object(M.f)("p",null,o),Object(M.f)("ul",null,n.map((function(e){return t.renderProject(e)})))),Object(M.f)(z.Footer,null,Object(M.f)(N.a,{priority:"primary",onClick:this.props.closeModal},Object(O.b)("View results"))))}}]),r}(d.a.Component);B.displayName="MissingProjectWarningModal";var H=r(630),$=r(1983);function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Q={projects:[],fields:["id","issue","project.name","platform","timestamp"],conditions:[],aggregations:[],orderby:"-timestamp",limit:1e3};function W(t){return Object.entries(Q).forEach((function(e){var r=f()(e,2),n=r[0],o=r[1];n in t||(t[n]=o)})),t}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=new j.a,c=W(t);c.start||c.end||c.range||(c.range=h.m);var a=E.default.get("user").isSuperuser||e.access.includes("org:admin"),u=null!=r?r:e.projects,s=u.filter((function(t){return a?t.hasAccess:t.isMember})),l=Y(s),d=Y(a?u:s),p=H.b.map((function(t){return L({},t,{isTag:!1})})),m=[];return{getInternal:q,getExternal:S,updateField:k,fetch:D,fetchWithoutLimit:R,cancelRequests:T,getQueryByType:_,getColumns:A,load:b,reset:C};function b(){return D({projects:d,fields:["tags_key"],aggregations:[["count()",null,"count"]],orderby:"-count",range:"90d",turbo:!0}).then((function(t){m=t.data.filter((function(t){return!H.d.includes(t.tags_key)})).map((function(t){var e=H.l[t.tags_key]||"string";return{name:t.tags_key,type:e,isTag:!0}}))})).catch((function(){m=H.k.map((function(t){return{name:t,type:H.l[t]||"string",isTag:!0}}))}))}function q(){return c}function S(){var t=c.projects.length?c.projects:l,e=Object(P.a)(L({},c,{statsPeriod:c.range})),r=e.statsPeriod,n=e.start,o=e.end,i=L({},n&&o&&{start:n,end:o},{},r&&{range:r}),a=!c.fields.length&&!c.aggregations.length?A().map((function(t){return t.name})):c.fields;return c.orderby||delete c.orderby,L({},c,{},i,{projects:t,fields:a})}function k(t,e){c[t]=e;var r=c.aggregations.filter((function(t){return Object($.c)(t,A())})),n=(c.orderby||"").replace(/^-/,""),o=void 0!==A().find((function(t){return t.name===n})),i=c.fields.includes(n),a=c.aggregations.some((function(t){return n===t[2]}));(r.length?!i&&!a:!o)&&(r.length>0?c.orderby="-".concat(r[0][2]):c.orderby="-timestamp"),c.orderby||(c.limit=null)}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0:0:1",o=t.limit||1e3,c="/organizations/".concat(e.slug,"/discover/query/?per_page=").concat(o,"&cursor=").concat(r);if(!t.projects.length)return Promise.reject(new Error(Object(O.b)("No projects selected")));if("number"==typeof t.limit&&(t.limit<1||t.limit>1e3))return Promise.reject(new Error(Object(O.b)("Invalid limit parameter")));if(y.a.utc(t.start).isAfter(y.a.utc(t.end)))return Promise.reject(new Error("Start date cannot be after end date"));var i=Object(P.a)(L({},t,{statsPeriod:t.range})),a=i.start,u=i.end,s=i.statsPeriod;return a&&u&&(t.start=a,t.end=u),s&&(t.range=s),n.requestPromise(c,{includeAllArgs:!0,method:"POST",data:t}).then((function(t){var e=f()(t,3),r=e[0],n=(e[1],e[2]);return r.pageLinks=n.getResponseHeader("Link"),r})).catch((function(){throw new Error(Object(O.b)("An error occurred"))}))}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),r="/organizations/".concat(e.slug,"/discover/query/");if(!t.projects.length)return Promise.reject(new Error(Object(O.b)("No projects selected")));if("number"==typeof t.limit&&(t.limit<1||t.limit>1e4))return Promise.reject(new Error(Object(O.b)("Invalid limit parameter")));if(y.a.utc(t.start).isAfter(y.a.utc(t.end)))return Promise.reject(new Error("Start date cannot be after end date"));var o=Object(P.a)(L({},t,{statsPeriod:t.range})),c=o.start,i=o.end,a=o.statsPeriod;return c&&i&&(t.start=c,t.end=i),a&&(t.range=a),n.requestPromise(r,{method:"POST",data:t}).catch((function(){throw new Error(Object(O.b)("Error with query"))}))}function T(){n.clear()}function _(t,e){if("byDayQuery"===e)return L({},t,{groupby:["time"],rollup:86400,orderby:"-time",limit:5e3});if("baseQuery"===e)return(t.fields||[]).some((function(t){return"id"===t||"issue.id"===t}))?L({},t,{fields:g()([].concat(i()(t.fields),["project.id"]))}):t;throw new Error("Invalid query type")}function A(){return[].concat(i()(p),i()(m))}function C(t){var r=v()(t.projects||[],(function(t){return-1===t||l.includes(t)})),n=f()(r,2),i=n[0],a=n[1];a.length&&Object(w.i)((function(t){return Object(M.f)(B,o()({organization:e,validProjects:i,invalidProjects:a},t))})),t.projects=i,c=W(t)}}function Y(t){return t.map((function(t){return parseInt(t.id,10)}))}}}]);
//# sourceMappingURL=DiscoverContainer~OverviewDashboard.js.map