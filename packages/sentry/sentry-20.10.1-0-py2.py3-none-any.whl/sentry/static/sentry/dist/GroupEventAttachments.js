(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[91],{1808:function(t,e,n){"use strict";n(1);var r=n(27),a=n(251),c=n(0);function o(t){var e=t.className,n=t.bytes;return Object(c.f)("span",{className:e},Object(a.a)({value:Object(r.j)(n),fixed:"xx KB"}))}o.displayName="FileSize",e.a=o},1867:function(t,e,n){var r=n(284),a=n(167);t.exports=function(t){return a(t)&&r(t)}},1915:function(t,e,n){"use strict";var r=n(10),a=n.n(r),c=n(11),o=n.n(c),i=n(12),u=n.n(i),s=n(13),l=n.n(s),f=n(6),p=n.n(f),b=n(1),d=n.n(b),h=n(35),y=n(69);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(t){u()(n,t);var e=O(n);function n(){return a()(this,n),e.apply(this,arguments)}return o()(n,[{key:"hasAttachmentsRole",value:function(){var t=h.default.get("user");if(!t)return!1;if(t.isSuperuser)return!0;var e=this.props.organization,n=e.availableRoles,r=e.attachmentsRole,a=e.role;if(!Array.isArray(n))return!1;var c=n.map((function(t){return t.id})),o=c.indexOf(r);return c.indexOf(a||"")>=o}},{key:"getDownloadUrl",value:function(){var t=this.props,e=t.attachment,n=t.organization,r=t.eventId,a=t.projectId;return"/api/0/projects/".concat(n.slug,"/").concat(a,"/events/").concat(r,"/attachments/").concat(e.id,"/")}},{key:"render",value:function(){return(0,this.props.children)(this.hasAttachmentsRole()?this.getDownloadUrl():null)}}]),n}(d.a.PureComponent);v.displayName="AttachmentUrl",e.a=Object(y.a)(v)},1974:function(t,e,n){"use strict";var r=n(21),a=n.n(r),c=n(28),o=n.n(c),i=n(10),u=n.n(i),s=n(11),l=n.n(s),f=n(12),p=n.n(f),b=n(13),d=n.n(b),h=n(6),y=n.n(h),O=n(4),v=n(1),j=n.n(v),m=n(3),g=n(30),D=n(9),w=n(183),A=n(18),I=n(50),R=n(0);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d()(this,n)}}var P=function(t){p()(n,t);var e=x(n);function n(){var t;u()(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).handleDelete=o()(a.a.mark((function e(){var n,r,c,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.api,c=n.url,o=n.onDelete,i=n.attachmentId,!c){e.next=10;break}return e.prev=2,e.next=5,r.requestPromise(c,{method:"DELETE"});case 5:o(i),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])}))),t}return l()(n,[{key:"render",value:function(){var t=this.props.url;return Object(R.f)(j.a.Fragment,null,Object(R.f)(k,{size:"xsmall",icon:Object(R.f)(A.t,{size:"xs"}),href:t?"".concat(t,"?download=1"):"",disabled:!t,title:t?void 0:Object(m.b)("Insufficient permissions to download attachments")},Object(m.b)("Download")),Object(R.f)(w.a,{confirmText:Object(m.b)("Delete"),message:Object(m.b)("Are you sure you wish to delete this file?"),priority:"danger",onConfirm:this.handleDelete,disabled:!t},Object(R.f)(g.a,{size:"xsmall",icon:Object(R.f)(A.r,{size:"xs"}),disabled:!t,priority:"danger",title:t?void 0:Object(m.b)("Insufficient permissions to delete attachments")})))}}]),n}(j.a.Component);P.displayName="EventAttachmentActions";var k=Object(O.a)(g.a,{target:"ewomrm90",label:"DownloadButton"})("margin-right:",Object(D.a)(.5),";");e.a=Object(I.a)(P)},1975:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(7),a=n.n(r),c=n(4),o=(n(1),n(118)),i=n.n(o),u=n(1976),s=n.n(u),l=n(8),f=n(9),p=n(3),b=n(164),d=n(30),h=n(0);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var O=["event.minidump","event.applecrashreport"],v=function(t){var e=t.location,n=e.query,r=e.pathname,c=n.types,o=i()(n,"types"),u=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n,{types:O}),l="";return void 0===c?l="all":0===s()(O,c).length&&(l="onlyCrash"),Object(h.f)(j,null,Object(h.f)(b.a,{merged:!0,active:l},Object(h.f)(d.a,{barId:"all",size:"small",to:{pathname:r,query:o}},Object(p.b)("All Attachments")),Object(h.f)(d.a,{barId:"onlyCrash",size:"small",to:{pathname:r,query:u}},Object(p.b)("Only Crash Reports"))))};v.displayName="GroupEventAttachmentsFilter";var j=Object(c.a)("div",{target:"eoyp7bi0",label:"FilterWrapper"})("display:flex;justify-content:flex-end;margin-bottom:",Object(f.a)(3),";");e.b=Object(l.withRouter)(v)},1976:function(t,e,n){var r=n(975),a=n(494),c=n(1977),o=n(1867),i=a((function(t){return c(r(t,o))}));t.exports=i},1977:function(t,e,n){var r=n(1978),a=n(495),c=n(642);t.exports=function(t,e,n){var o=t.length;if(o<2)return o?c(t[0]):[];for(var i=-1,u=Array(o);++i<o;)for(var s=t[i],l=-1;++l<o;)l!=i&&(u[i]=r(u[i]||s,t[l],e,n));return c(a(u,1),e,n)}},1978:function(t,e,n){var r=n(647),a=n(649),c=n(977),o=n(333),i=n(338),u=n(648);t.exports=function(t,e,n,s){var l=-1,f=a,p=!0,b=t.length,d=[],h=e.length;if(!b)return d;n&&(e=o(e,i(n))),s?(f=c,p=!1):e.length>=200&&(f=u,p=!1,e=new r(e));t:for(;++l<b;){var y=t[l],O=null==n?y:n(y);if(y=s||0!==y?y:0,p&&O==O){for(var v=h;v--;)if(e[v]===O)continue t;d.push(y)}else f(e,O,s)||d.push(y)}return d}},2941:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(140),o=n(69),i=n(387),u=n(7),s=n.n(u),l=n(26),f=n.n(l),p=n(10),b=n.n(p),d=n(11),h=n.n(d),y=n(139),O=n.n(y),v=n(12),j=n.n(v),m=n(13),g=n.n(m),D=n(6),w=n.n(D),A=n(254),I=n.n(A),R=n(8),x=n(199),P=n(3),k=n(281),S=n(47),E=n(618),z=n(1712),N=n(4),q=n(70),C=n(620),T=n(1808),B=n(1915),F=n(1974),G={"event.minidump":Object(P.b)("Minidump"),"event.applecrashreport":Object(P.b)("Apple Crash Report"),"event.attachment":Object(P.b)("Other")},L=n(0),U=function(t){var e=t.attachment,n=t.projectId,r=t.onDelete,a=t.isDeleted,c=t.orgId,o=t.groupId;return Object(L.f)(W,{isDeleted:a},Object(L.f)("td",null,Object(L.f)("h5",null,e.name,Object(L.f)("br",null),Object(L.f)("small",null,Object(L.f)(C.a,{date:e.dateCreated})," Â·"," ",Object(L.f)(q.a,{to:"/organizations/".concat(c,"/issues/").concat(o,"/events/").concat(e.event_id,"/")},e.event_id)))),Object(L.f)("td",null,G[e.type]||Object(P.b)("Other")),Object(L.f)("td",null,Object(L.f)(T.a,{bytes:e.size})),Object(L.f)("td",null,Object(L.f)(B.a,{projectId:n,eventId:e.event_id,attachment:e},(function(t){return!a&&Object(L.f)(F.a,{url:t,onDelete:r,attachmentId:e.id})}))))};U.displayName="GroupEventAttachmentsTableRow";var W=Object(N.a)("tr",{target:"ekv38qo0",label:"TableRow"})("opacity:",(function(t){return t.isDeleted?.3:1}),";td{text-decoration:",(function(t){return t.isDeleted?"line-through":"normal"}),";}"),_=U,J=function(t){var e=t.attachments,n=t.orgId,r=t.projectId,a=t.groupId,c=t.onDelete,o=t.deletedAttachments,i=[Object(P.b)("Name"),Object(P.b)("Type"),Object(P.b)("Size"),Object(P.b)("Actions")];return Object(L.f)("table",{className:"table events-table"},Object(L.f)("thead",null,Object(L.f)("tr",null,i.map((function(t){return Object(L.f)("th",{key:t},t)})))),Object(L.f)("tbody",null,e.map((function(t){return Object(L.f)(_,{key:t.id,attachment:t,orgId:n,projectId:r,groupId:a,onDelete:c,isDeleted:o.some((function(e){return t.id===e}))})}))))};J.displayName="GroupEventAttachmentsTable";var Q=J,K=n(1975);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var a=w()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var X=function(t){j()(n,t);var e=V(n);function n(){var t;b()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).handleDelete=function(e){t.setState((function(t){return{deletedAttachments:[].concat(f()(t.deletedAttachments),[e])}}))},t}return h()(n,[{key:"getDefaultState",value:function(){return H({},O()(w()(n.prototype),"getDefaultState",this).call(this),{deletedAttachments:[]})}},{key:"getEndpoints",value:function(){var t=this.props,e=t.params,n=t.location;return[["eventAttachments","/issues/".concat(e.groupId,"/attachments/"),{query:H({},I()(n.query,["cursor","environment","types"]),{limit:50})}]]}},{key:"renderNoQueryResults",value:function(){return Object(L.f)(k.a,null,Object(L.f)("p",null,Object(P.b)("Sorry, no event attachments match your search query.")))}},{key:"renderEmpty",value:function(){return Object(L.f)(k.a,null,Object(L.f)("p",null,Object(P.b)("There don't seem to be any event attachments yet.")))}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderInnerBody",value:function(){var t=this.props,e=t.projectSlug,n=t.params,r=t.location,a=this.state,c=a.loading,o=a.eventAttachments,i=a.deletedAttachments;return c?Object(L.f)(S.default,null):o.length>0?Object(L.f)(Q,{attachments:o,orgId:n.orgId,projectId:e,groupId:n.groupId,onDelete:this.handleDelete,deletedAttachments:i}):r.query.types?this.renderNoQueryResults():this.renderEmpty()}},{key:"renderBody",value:function(){return Object(L.f)(a.a.Fragment,null,Object(L.f)(K.b,null),Object(L.f)(x.a,{className:"event-list"},Object(L.f)(x.c,null,this.renderInnerBody())),Object(L.f)(E.a,{pageLinks:this.state.eventAttachmentsPageLinks}))}}]),n}(z.a),Y=R.withRouter(X),Z=function(t){var e=t.organization,n=t.group;return Object(L.f)(c.a,{features:["event-attachments"],organization:e,renderDisabled:function(t){return Object(L.f)(i.a,t)}},Object(L.f)(Y,{projectSlug:n.project.slug}))};Z.displayName="GroupEventAttachmentsContainer";e.default=Object(o.a)(Z)}}]);
//# sourceMappingURL=GroupEventAttachments.js.map