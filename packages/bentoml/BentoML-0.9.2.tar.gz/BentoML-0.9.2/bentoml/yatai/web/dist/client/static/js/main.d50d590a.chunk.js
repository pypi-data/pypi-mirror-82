(this["webpackJsonpyatai-web-ui"]=this["webpackJsonpyatai-web-ui"]||[]).push([[0],{124:function(e,t,n){e.exports=n(178)},129:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(14),o=(n(129),n(6)),c=n(13),l=n(32),i=n(74),m=n.n(i),s=n(181),u=function(e){var t=e.error;return a.createElement(s.c,null,a.createElement("h3",null,"Encounter HTTP Request Error"),a.createElement("div",null,JSON.stringify(t)))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=Object.assign({},t,e),r=a.url,o=a.data,c=a.method,l=a.headers,i=a.params;return m()({method:c,url:r,data:o,headers:l,params:i}).then((function(e){n({data:e.data,isLoading:!1,error:!1})})).catch((function(e){n({error:e.response,isLoading:!1,data:void 0})}))},d=function(e){var t=a.useState({data:void 0,error:void 0,isLoading:!0}),n=Object(l.a)(t,2),r=n[0],o=n[1];return a.useEffect((function(){p(void 0,e,o)}),[e]),r.isLoading?a.createElement(s.h,null):r.error?a.createElement(u,{error:r.error}):e.children({data:r.data})},f=n(36),E=n(78),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f.unix(e).fromNow(!t)},b=n(25),h=n(20),g=b.a.div({width:"100%",margin:"auto",backgroundColor:"#F5F8FA"}),y=b.a.div((function(e){return{display:"flex",flexWrap:"wrap",borderBottom:e.showBottomBorder?"2px solid #D8E1E8":"none",":hover":{backgroundColor:"#EBF1F5"}}})),_=Object(b.a)(y)({borderBottom:"2px solid #D8E1E8",fontWeight:600,":hover":{backgroundColor:"#F5F8FA"}}),N=b.a.div((function(e){return{color:"#394B59",textAlign:"left",padding:"20px",flex:e.flex?e.flex:1,height:"auto",position:"relative",whiteSpace:"pre-wrap",overflowWrap:"break-word",minWidth:"100px"}})),A=function(e){var t=e.content,n=e.header,r=e.ratio,o=r&&n?Object(h.zip)(n,r):n;return a.createElement(g,null,o&&a.createElement(_,null,o.map((function(e,t){return a.createElement(N,{key:t,flex:e[1]},e[0])}))),t.map((function(e,t){var n=Object(h.zip)(e.content,r);return e.link?a.createElement(c.b,{key:t,to:e.link,style:{textDecoration:"none"}},a.createElement(y,{key:t},n.map((function(e,t){return a.createElement(N,{key:t,flex:e[1]},e[0])})))):a.createElement(y,{key:t},n.map((function(e,t){return a.createElement(N,{key:t,flex:e[1]},e[0])})))})))},x=n(24),k=function(e){var t,n=e.state;switch(n=n||"PENDING"){case"RUNNING":case"SUCCESSED":t=x.a.SUCCESS;break;case"FAILED":case"ERROR":case"CRASH_LOOP_BACK_OFF":t=x.a.DANGER;break;case"PENDING":t=x.a.PRIMARY;break;default:t=x.a.NONE}return a.createElement(s.i,{intent:t,style:{verticalAlign:"middle"}},n)},L=["Name","Namespace","Platform","BentoService","Status","Age","Last updated at",""],O=[3,2,2,5,2,1,2,1],S=function(e){var t=e.deployments.map((function(e){return{content:[e.name,e.namespace,e.spec.operator,"".concat(e.spec.bento_name,":").concat(e.spec.bento_version),a.createElement(k,{state:e.state.state}),v(Number(e.created_at.seconds)),v(Number(e.last_updated_at.seconds),!0),a.createElement(c.b,{to:"/deployments/".concat(e.namespace,"/").concat(e.name)},"Detail")],link:"/deployments/".concat(e.namespace,"/").concat(e.name)}}));return a.createElement(A,{content:t,ratio:O,header:L})},w=["BentoService(name:version)","Age","APIs","Artifacts",""],B=[6,2,4,4,1],j=function(e){var t=e.bentos.map((function(e){var t=e.bento_service_metadata,n=function(e){return e?e.map((function(e){return"".concat(e.name,"<").concat(e.input_type,">")})).join("\n"):""}(t.apis),r=function(e){return e?e.map((function(e){return"".concat(e.name,"<").concat(e.artifact_type,">")})).join("\n"):""}(t.artifacts);return{content:["".concat(e.name,":").concat(e.version),v(Number(t.created_at.seconds)),n,r,a.createElement(c.b,{to:"/repository/".concat(e.name,"/").concat(e.version)},"Detail")],link:"/repository/".concat(e.name,"/").concat(e.version)}}));return a.createElement(A,{content:t,ratio:B,header:w})},D=b.a.div({margin:"0 auto",maxWidth:"80%",marginBottom:"100px",minWidth:"960px"}),I=b.a.section({margin:"30px 0 0"}),R=D,C=function(){return a.createElement("div",null,a.createElement(d,{url:"/api/ListDeployments",method:"get",params:{limit:5}},(function(e){var t,n=e.data;return t=n&&n.deployments?a.createElement(S,{deployments:n.deployments}):a.createElement("a",{href:"https://docs.bentoml.org/en/latest",target:"_blank",rel:"noopener noreferrer"},"Learn about managing model serving deployments with BentoML \ud83d\udd17"),a.createElement(I,null,a.createElement("h2",null,"Latest Deployments"),t)})),a.createElement(d,{url:"/api/ListBento",method:"get",params:{limit:5}},(function(e){var t=e.data;return t&&t.bentos?a.createElement(I,null,a.createElement("h2",null,"Latest Models"),a.createElement(j,{bentos:t.bentos})):a.createElement(I,null,a.createElement("h2",null,"No model found"),a.createElement("a",{href:"https://docs.bentoml.org/en/latest",target:"_blank",rel:"noopener noreferrer"},"Learn about packaging ML model for serving with BentoML \ud83d\udd17"))})))},F=function(e){var t,n=e.match.params;return n.namespace&&(t={namespace:n.namespace}),a.createElement(d,{url:"/api/ListDeployments",method:"get",params:t},(function(e){var t,n,r=e.data,o=0;return r&&r.deployments?(n=r.deployments,o=h.filter(n,(function(e){return e.state&&e.state.state&&"RUNNING"===e.state.state})).length||0,t=a.createElement(S,{deployments:r.deployments})):t=a.createElement("a",{href:"https://docs.bentoml.org/en/latest",target:"_blank",rel:"noopener noreferrer"},"Learn more about managing model serving deployments with BentoML"),a.createElement("div",null,a.createElement("h2",null,"Active Deployments: ",o),t)}))},M=function(e){return h.capitalize(e).replace("_"," ")},P=function(e){var t=e.spec,n=[{content:["Platform",t.operator]}];switch(t.operator){case"AWS_LAMBDA":h.each(t.aws_lambda_operator_config,(function(e,t){switch(t){case"memory_size":e+=" MB";break;case"timeout":e+=" seconds"}n.push({content:[M(t),e]})}));break;case"AWS_SAGEMAKER":h.each(t.aws_lambda_operator_config,(function(e,t){n.push({content:[M(t),e]})}))}return a.createElement(I,null,a.createElement("h2",null,"Configuration"),a.createElement(A,{content:n,ratio:[1,4]}))},G=function(e){if(!e)return["None"];for(var t=e.fields,n=[],r=Object.keys(t),o=0;o<r.length;o++){var c=r[o],l=t[c],i=Object.keys(l)[0],m=Object.values(l)[0];"nullValue"===i&&(m="null"),n.push(a.createElement("p",{key:o},"".concat(c,": ").concat(m)))}return n},W=["API name","Input type","Input Config","Documentation"],J=[1,1,1,4],U=function(e){var t=e.apis.map((function(e){return{content:[e.name,e.input_type,G(e.input_config),e.docs]}}));return a.createElement(I,null,a.createElement("h2",null,"APIs"),a.createElement(A,{content:t,header:W,ratio:J}))},z=function(e){var t,n=e.deployment;switch(n.spec.operator){case"AWS_LAMBDA":t=n.spec.aws_lambda_operator_config.api_name;break;case"AWS_SAGEMAKER":t=n.spec.sagemaker_opeartor_config.api_name}return a.createElement(d,{url:"/api/GetBento",params:{bento_name:n.spec.bento_name,bento_version:n.spec.bento_version}},(function(e){if(e&&e.data&&e.data.bento){var n=e.data.bento.bento_service_metadata.apis;if(t){var r=n.find((function(e){return e.name===t}));n=[r]}return a.createElement(U,{apis:n})}return a.createElement(I,null,a.createElement("h3",null,"APIs"),a.createElement("div",null,"No APIs"))}))},T=function(e){return"".concat(v(e,!0)," (").concat(function(e){return f.unix(e).toISOString()}(e),")")},H=function(e){var t=e.deployment,n="Not Available";"RUNNING"===t.state.state&&t.state.info_json&&(n=JSON.parse(t.state.info_json).endpoints.join("\n"));var r=[{content:["Created at",T(Number(t.created_at.seconds))]},{content:["Updated at",T(Number(t.last_updated_at.seconds))]},{content:["BentoService",a.createElement(c.b,{to:"/repository/".concat(t.spec.bento_name,"/").concat(t.spec.bento_version)},"".concat(t.spec.bento_name,":").concat(t.spec.bento_version))]},{content:["Endpoint",n]}];return a.createElement(I,null,a.createElement("h2",null,"Info"),a.createElement(A,{content:r,ratio:[1,4]}))},K=function(e){var t=e.state;return-1!==["FAILED","ERROR","CRASH_LOOP_BACK_OFF"].indexOf(t.state)?a.createElement(s.c,{elevation:3,style:{backgroundColor:"orange"}},t.error_message):null},q=function(e){var t=e.match.params;return a.createElement(d,{url:"/api/GetDeployment",params:{deployment_name:t.name,namespace:t.namespace}},(function(e){var t;if(e.data&&e.data.deployment){var n=e.data.deployment;t=a.createElement("div",null,a.createElement("h1",null,"Deployment: ",n.name," ",a.createElement(k,{state:n.state.state})),a.createElement(K,{state:n.state}),a.createElement(H,{deployment:n}),a.createElement(P,{spec:n.spec}),a.createElement(z,{deployment:n}))}else t=a.createElement("div",null,JSON.stringify(e));return a.createElement("div",null,t)}))},Q=function(e){var t,n=(t=e.location.search,E.parse(t,{ignoreQueryPrefix:!0})),r=Number(n.offset)||0;return a.createElement(d,{url:"/api/ListBento",method:"get",params:{limit:30,offset:r}},(function(e){var t,n=e.data,o=!1;return n&&n.bentos?(o=!0,t=a.createElement(j,{bentos:n.bentos})):t=a.createElement(I,null,"No more models found"),a.createElement(I,null,t,a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px"}},a.createElement("div",null,r>0&&a.createElement(c.b,{to:"/repository?offset=".concat(r-10)},"Previous")),a.createElement("div",null,o&&a.createElement(c.b,{to:"/repository?offset=".concat(r+10)},"Next"))))}))},V=function(e){var t=e.match.params;return a.createElement("div",null,a.createElement(d,{url:"/api/ListBento",method:"get",params:{bento_name:t.name}},(function(e){var n=e.data;return n&&n.bentos?a.createElement("div",null,a.createElement("h2",null,t.name),a.createElement(j,{bentos:n.bentos})):a.createElement("div",null,JSON.stringify(n))})))},Y=[1,4],X=function(e){var t=e.env,n=Object.keys(t).map((function(e){return{content:[e,t[e]]}}));return a.createElement(I,null,a.createElement("h2",null,"Environments"),a.createElement(A,{content:n,ratio:Y}))},Z=["Name","Type"],$=[1,4],ee=function(e){var t=e.artifacts.map((function(e){return{content:[e.name,e.artifact_type]}}));return a.createElement(I,null,a.createElement("h2",null,"Artifacts"),a.createElement(A,{content:t,ratio:$,header:Z}))},te=function(e){var t=e.match.params;return a.createElement(d,{url:"/api/GetBento",params:{bento_name:t.name,bento_version:t.version}},(function(e){var n,r=e.data;if(r&&r&&r.bento){var o=r.bento;n=a.createElement("div",null,a.createElement("p",null,a.createElement("b",null,"Created at: "),f.unix(Number(o.bento_service_metadata.created_at.seconds)).toDate().toLocaleString()),a.createElement("p",null,a.createElement("b",null,"Storage: ")," ",o.uri.uri),a.createElement(U,{apis:o.bento_service_metadata.apis}),a.createElement(ee,{artifacts:o.bento_service_metadata.artifacts}),a.createElement(X,{env:o.bento_service_metadata.env}))}else n=a.createElement("div",null,JSON.stringify(r));return a.createElement(I,null,a.createElement("h2",null,t.name,":",t.version),n)}))},ne={text:"Home",href:"/"},ae=function(e){var t=e.split("/").filter((function(e){return e}));return t.map((function(e,n){var a=n===t.length-1,r="/".concat(t.slice(0,n+1).join("/")),o=e;return["repository","deployments"].includes(e)&&(o=Object(h.capitalize)(e)),a?{text:o}:{text:o,href:r}}))},re=function(){var e=a.useState([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(o.f)();return a.useEffect((function(){var e=ae(c.pathname);r(e)}),[c]),n.length>0&&n.unshift(ne),0===n.length?null:a.createElement(I,null,a.createElement(s.b,{items:n}))},oe=n(35),ce=n(1),le=n(80),ie=n.n(le),me=function(e,t){return{fontWeight:e===t?"bold":"normal"}},se=function(){var e=a.useState(""),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(o.f)();return a.useEffect((function(){var e=i.pathname.split("/")[1];r(e)}),[i]),a.createElement(s.d,{style:{paddingLeft:"10%",marginLeft:0}},a.createElement(s.f,{align:oe.a.LEFT},a.createElement(s.g,null,a.createElement(c.b,{to:"/"},a.createElement("img",{src:ie.a,width:150,alt:""})," ")),a.createElement(s.e,null),a.createElement(s.a,{className:ce.a.MINIMAL,large:!0,text:"Repository",href:"/repository",style:me(n,"repository")}),a.createElement(s.a,{className:ce.a.MINIMAL,large:!0,text:"Deployments",href:"/deployments",style:me(n,"deployments")})))},ue=function(){return a.createElement(c.a,null,a.createElement(se,null),a.createElement(R,null,a.createElement(re,null),a.createElement("div",null,a.createElement(o.c,null,a.createElement(o.a,{path:"/deployments/:namespace/:name",component:q}),a.createElement(o.a,{path:"/deployments/:namespace",component:F}),a.createElement(o.a,{path:"/deployments",component:F}),a.createElement(o.a,{path:"/repository/:name/:version",component:te}),a.createElement(o.a,{path:"/repository/:name",component:V}),a.createElement(o.a,{path:"/repository",component:Q}),a.createElement(o.a,{path:"/about",component:C}),a.createElement(o.a,{path:"/config",component:C}),a.createElement(o.a,{exact:!0,path:"/",component:C})))))};Object(r.render)(a.createElement(ue,null),document.getElementById("root"))},80:function(e,t,n){e.exports=n.p+"static/media/bentoml-logo.21d67caf.png"}},[[124,1,2]]]);
//# sourceMappingURL=main.d50d590a.chunk.js.map