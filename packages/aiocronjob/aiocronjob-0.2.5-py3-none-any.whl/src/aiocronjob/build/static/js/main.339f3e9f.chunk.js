(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{161:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(9),c=n.n(r),l=(n(88),n(89),n(75)),s=n(76),i=n(41),u=n(82),h=n(81),f=(n(90),n(11)),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={jobs:[]},a.showActionSheet=function(e){var t,r=[];"running"===e.last_status?(t="cancel",r.push("Stop job")):(t="start",r.push("Start job")),r.push("Cancel"),f.a.showActionSheetWithOptions({options:r,cancelButtonIndex:r.length-1,title:o.a.createElement("span",null,e.name," ",n.getStatusBadge(e.last_status)),message:o.a.createElement("span",null,"\ud83d\udd53 ",e.crontab),maskClosable:!0},(function(n){0===n&&a.doAction(e.name,t).then(a.handleRefresh).catch((function(e){console.error("oops",e)}))}))},a.handleRefresh=a.handleRefresh.bind(Object(i.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.handleRefresh()}},{key:"handleRefresh",value:function(){var e=this;fetch("".concat("","/api/jobs")).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({jobs:t})})).catch((function(e){f.g.offline("".concat(e),3)}))}},{key:"doAction",value:function(e,t){return fetch("".concat("","/api/jobs/").concat(e,"/").concat(t))}},{key:"render",value:function(){var e=this,t=this.state.jobs.filter((function(e){return"error"===e.last_status})),a=this.state.jobs.filter((function(e){return"done"===e.last_status})),r=this.state.jobs.filter((function(e){return"running"===e.last_status})),c=[{title:o.a.createElement(f.b,{text:this.state.jobs.length},"All")},{title:o.a.createElement(f.b,{text:r.length},"Running")},{title:o.a.createElement(f.b,{text:t.length},"Error")},{title:o.a.createElement(f.b,{text:a.length},"Done")}],l=function(t){return o.a.createElement(f.d,null,t.map((function(t){return o.a.createElement(f.d.Item,{key:t.name,arrow:"horizontal",onClick:function(){return e.showActionSheet(t)}},o.a.createElement("span",null,t.name,n.getStatusBadge(t.last_status)))})))};return[o.a.createElement(f.e,{key:"navbar",mode:"light",rightContent:o.a.createElement(f.c,{icon:o.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/jBfVSpDwPbitsABtDDlB.svg",alt:""}),inline:!0,size:"small",onClick:this.handleRefresh},"Refresh")},"Aiocronjob"),o.a.createElement(f.f,{key:"tabs",tabs:c,initialPage:1,onChange:function(e,t){console.log("onChange",t,e)},onTabClick:function(e,t){console.log("onTabClick",t,e)}},o.a.createElement("div",null,0===this.state.jobs.length?"No jobs.":l(this.state.jobs)),o.a.createElement("div",null,0===r.length?"No running jobs.":l(r)),o.a.createElement("div",null,0===t.length?"No error jobs.":l(t)),o.a.createElement("div",null,0===a.length?"No done jobs.":l(a)))]}}],[{key:"getStatusBadge",value:function(e){var t;switch(e){case"pending":t="orange";break;case"running":t="green";break;case"done":t="#000";break;case"error":t="red";break;default:t="grey"}return o.a.createElement(f.b,{text:e,style:{marginLeft:12,padding:"0 3px",backgroundColor:"#fff",borderRadius:2,color:t,border:"1px solid ".concat(t)}})}}]),n}(o.a.Component);var m=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(m,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){e.exports=n(161)},89:function(e,t,n){},90:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.339f3e9f.chunk.js.map